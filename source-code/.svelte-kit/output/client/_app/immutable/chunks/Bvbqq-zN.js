import{d as w,g as m,w as a}from"./C_S5TygX.js";const l="en",c=a(l),f=a({});let i=Promise.resolve(),u=!1;async function d(e,t){u=!1;try{const o=await((t==null?void 0:t.fetch)??fetch)(`/languages/${e}.json`);if(!o.ok)throw new Error("Language file not found");const s=await o.json();f.set(s)}catch(o){throw console.error("Failed to load text:",o),console.warn("Refreshing the page to retry loading the language file..."),setTimeout(()=>{window.location.reload()},1e3),o}u=!0}async function y(e=l,t){c.set(e),i=d(e,t),await i}const g=w([c,f],([e,t])=>(o,s={})=>{if(!t[o])return console.warn(`Text key "${o}" not found for language "${e}".`),"";let r=t[o];return Object.keys(s).forEach(n=>{r=r.replace(`{${n}}`,s[n])}),r});function p(){return new Promise((e,t)=>{setTimeout(()=>{e(!0)},100)})}async function h(e,t={}){for(await i;!u;)await p();const o=m(g)(e,t);return o||console.warn(`Text key "${e}" not found.`),o||""}function S(){return typeof window>"u"?{get:()=>null,set:()=>{},remove:()=>{}}:{get:e=>JSON.parse(localStorage.getItem(e)),set:(e,t)=>localStorage.setItem(e,JSON.stringify(t)),remove:e=>localStorage.removeItem(e)}}function _(e,t,o,s=()=>!0){if(typeof window<"u"){const r=t.get(o);r!==null&&e.set(r),e.subscribe(n=>{s(n)?t.set(o,n):t.remove(o)})}return e}function b(e,t){let o;const s=typeof window<"u"&&typeof sessionStorage<"u";if(s){const n=sessionStorage.getItem(e);o=n?JSON.parse(n):t}else o=t;const r=a(o);return s&&r.subscribe(n=>{sessionStorage.setItem(e,JSON.stringify(n))}),r}const k=_(a({user_id:null,auth_token:null,refresh_token:null,profile_picture:null,is_guest_mode:null}),S(),"userStore",e=>!e.is_guest_mode&&e.user_id);export{h as g,y as i,b as s,g as t,k as u};
