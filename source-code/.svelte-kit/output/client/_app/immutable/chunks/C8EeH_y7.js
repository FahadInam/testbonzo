import{h as E,i as f,j as N,E as P,P as Q,Q as R,N as S,R as d,U as g,k as p,o as y,af as U,q as $,ae as h,$ as j,b as A,g as C,ag as D,ah as F}from"./UMRfY9Ko.js";import{s as H,g as I}from"./CS3uJLGD.js";function L(a,u,n=!1){f&&N();var s=a,r=null,e=null,o=U,k=n?P:0,i=!1;const q=(t,l=!0)=>{i=!0,v(l,t)},v=(t,l)=>{if(o===(o=t))return;let m=!1;if(f){const x=s.data===Q;!!o===x&&(s=R(),S(s),d(!1),m=!0)}o?(r?g(r):l&&(r=p(()=>l(s))),e&&y(e,()=>{e=null})):(e?g(e):l&&(e=p(()=>l(s))),r&&y(r,()=>{r=null})),m&&d(!0)};E(()=>{i=!1,u(q),i||v(null,null)},k),f&&(s=$)}let c=!1,b=Symbol();function M(a,u,n){const s=n[u]??(n[u]={store:null,source:j(void 0),unsubscribe:h});if(s.store!==a&&!(b in n))if(s.unsubscribe(),s.store=a??null,a==null)s.source.v=void 0,s.unsubscribe=h;else{var r=!0;s.unsubscribe=H(a,e=>{r?s.source.v=e:A(s.source,e)}),r=!1}return a&&b in n?I(a):C(s.source)}function O(){const a={};function u(){D(()=>{for(var n in a)a[n].unsubscribe();F(a,b,{enumerable:!1,value:!0})})}return[a,u]}function T(a){var u=c;try{return c=!1,[a(),c]}finally{c=u}}export{M as a,T as c,L as i,O as s};
