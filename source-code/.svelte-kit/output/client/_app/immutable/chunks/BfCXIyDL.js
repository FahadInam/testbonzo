import{g as r}from"./C_S5TygX.js";import{u as o,g as v}from"./Bvbqq-zN.js";import{r as A}from"./CR2liGHp.js";import{i as N,u as f,c as n,k,b as l}from"./DWJ43-ZD.js";import{A as G,__tla as I}from"./Djyhf4cp.js";import{s as g}from"./ClXJh1T-.js";import{g as O}from"./CkIfqAOp.js";import{b as S,d as x,m as C,s as D,__tla as E}from"./Cf2TjtaF.js";import{g as d}from"./BoEBYeq-.js";import{t as F}from"./-67--UVX.js";let p,L=Promise.all([(()=>{try{return I}catch{}})(),(()=>{try{return E}catch{}})()]).then(async()=>{let u="demouserguestmode@kp.com",b="7b27d885967fb69b6cf101dffbe76f1df1147cae26d3f17bad8db1b9cc9b8896";async function h(){const i=r(N).instance_id,a=await A(G.LOGIN_USER,{username:u,password:b},{definitionOverrides:{loader:!0},headers:{instance_id:i}});(a==null?void 0:a.error_code)==0?(o.set(a.data[0]),f(O,"guest_mode",!0),f(o,"is_guest_mode",!0)):(a==null?void 0:a.error_code)<0&&g(a==null?void 0:a.error_message)}p=async function(i){var c,m;let a=[];{const _=i.competition_name,w=(c=r(o))==null?void 0:c.user_id,y=(m=r(o))==null?void 0:m.active_role;if(w||await h(),_){let t=null;if(r(n).competition_id)t=r(n);else{const e=await S();t=k(_,e.data.competitions,"url")}if(t){if(n.set(t),!t.current_grade){const e=await x();if(!Array.isArray(e.data.grades)||e.data.grades.length==0)console.warn("No grade found for this competition."),g(await v("no_content")),d("/competitions");else{const s=C(e.data.grades);l.set({grades:e.data.grades,current_grade:e.data.current_grade||"0"}),console.log("this is grades set",l,s),s.length==1?await D(s[0].value):y!=="principal"&&(F.set(s),d("/settings/change-grade"))}}}else console.warn("No competition found."),d("/competitions")}}return{data:a}}});export{L as __tla,p as c};
