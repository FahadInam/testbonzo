import{w as r,g as l}from"./C_S5TygX.js";import{u as m,g as u}from"./Bvbqq-zN.js";import{r as _,L as y}from"./DxGJWrS1.js";import{s as v}from"./D6ovqnLS.js";import{s as k}from"./CROUG2YM.js";import{a as V,b as I,i as L,h as B,j as $,I as c,s as E}from"./CJxW89IG.js";import{g as O}from"./BoEBYeq-.js";const d=r({url:null,name:null,current_grade:null,competition_id:null,is_lesson_page_hide:null,is_games_page:null,is_premium:null}),g=r({instance_id:null,banner_text:""}),b=r({visible:!1,backLabel:"",isLogoVisible:!1,isCoinVisible:!1,isBackButtonVisible:!0,isVoucherButtonVisible:!1,isVoucherModalVisible:!1,isNotificationVisible:!1,isShowPaymentBanner:!1,isShowRules:!1,isProfileVisible:!0}),h=r({current_grade:null,grades:[]});function P(t,e){const n={};for(const s in t)e.hasOwnProperty(s)?n[e[s]]=t[s]:n[s]=t[s];return n}function T(t,e,n){return e.find(s=>s[n]===t)}function A(t,e,n){t.update(s=>({...s,[e]:n}))}function M(t,e){function n(s){s.key==="Enter"&&(e(s),s.preventDefault())}return t.addEventListener("keydown",n),{destroy(){t.removeEventListener("keydown",n)}}}async function o(t,e){return new Promise(n=>{const s=()=>{const a=l(t);a!=null&&a[e]?n(a[e]):typeof window<"u"&&requestAnimationFrame(s)};s()})}async function S(){return await o(m,"auth_token")}async function q(){return await o(g,"instance_id")}async function C(){return await o(d,"current_grade")}async function D(){return await o(h,"current_grade")}const x=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,N=(t,e)=>t.filter((n,s,a)=>a.map(i=>i[e]).indexOf(n[e])===s);function j(t){return t?y.decompressFromBase64(t):null}const z=t=>/^[a-z0-9]+$/i.test(t);function F(t,e=1){if(t==null||isNaN(t))return"0";if(t<1e3)return t.toString();const n=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],s=n.find(a=>t>=a.value)||n[n.length-1];return(t/s.value).toFixed(e).replace(/\.0+$|(\.\d*[1-9])0+$/,"$1")+s.symbol}const R=async(t,e,n)=>{v.set({visible:t});const s=await u(e),a=await u("back"),i=l(m).active_role==="principal";setTimeout(()=>{b.set({visible:!0,backLabel:i?a:s,isLogoVisible:!1,isCoinVisible:!i,isBackButtonVisible:!0,isProfileVisible:!0})},50),k(n)},U=(t,e)=>{console.log(e,"data here");const n=JSON==null?void 0:JSON.parse(e),s=n.opponent_username,a=n.content_title,i=`<b>${s}</b>`,p=`<b>${a}</b>`,f=t.replace(s,i).replace(a,p);return console.log(f,"formattedMessage"),f},G=(t,e)=>{let n=Object.keys(t).filter(s=>!s.includes("a66.png")&&!s.includes("a67.png")).sort((s,a)=>{const i=parseInt(s.match(/a(\d+)\.png/)[1],10),p=parseInt(a.match(/a(\d+)\.png/)[1],10);return i-p}).map(s=>s);return e&&(n=n.slice(0,14)),n},H=t=>{const e=t.split("/").pop().match(/^a(\d+)/);return e?e[1]:null};function J(t,{animationClass:e}){const n=new IntersectionObserver(([s])=>{s.isIntersecting&&(t.classList.add("animate__animated",e),n.unobserve(t))},{});return n.observe(t),{destroy(){n.unobserve(t)}}}function K(t){return t<10?`0${t}`:`${t}`}const Q=(t,e)=>{let n="";return e!=="undefined"&&(n=window.btoa(e)),n};function w(t){var s;const e=(s=l(E))==null?void 0:s.instance_id,n={[c.GLOBAL_CLIMATE_LITERACY_ID]:"gg_",[c.SHUPAVU_ID]:"sh_",[c.POCKET_GAMES_ID]:"pg_",[c.QUOTIENT_ID]:"qg_"};return n[e]?n[e]+t:t}function W(t,e){if(!t||typeof t!="function")return;const n=w(e);return t(n)||t(e)}async function Y(t){const e=w(t);let n=await u(e);return n||(n=await u(t)),n}function X(){const t=window.location.href;if(V)t==="https://app.shupavugames.com/"?window.location.href="https://shupavugames.com/":t==="https://learningapp.shupavugames.com/"&&(window.location.href="https://learning.shupavugames.com/");else if(I)t==="https://pocketgames.21c.digital/"&&O("/account/signup");else if(L){if(t==="https://globalclimateliteracy.org/"||t==="https://www.globalclimateliteracy.org/"||location.origin==="https://kpbonzodev.netlify.app")throw _(302,`${location.origin}/program/glc`)}else B?t==="https://app.quotient.games/"&&(window.location.href="https://quotient.games/"):$&&window.location.href==="https://games.greenguardians.com/"&&(window.location.href="https://singapore.greenguardians.com/competitions")}function Z(){return!!l(m).is_guest_mode}function tt(){return typeof window>"u"?!1:window.innerWidth<1024}export{x as A,Z as I,X as L,N as R,b as a,h as b,d as c,tt as d,S as e,C as f,W as g,o as h,g as i,q as j,T as k,U as l,j as m,Y as n,G as o,H as p,Q as q,P as r,R as s,F as t,A as u,z as v,D as w,M as x,J as y,K as z};
