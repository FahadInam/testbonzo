import{r as i}from"./KMGk3Nas.js";import{g as n}from"./CS3uJLGD.js";import{A as o,__tla as J}from"./xsk9tW-i.js";import{b as V,j as Z}from"./CpOe2gu7.js";import{p as b}from"./DMPqjojU.js";import{u as s}from"./rUUE80t4.js";import{g as N}from"./KgIHh09F.js";import{a as Q}from"./vNnwmH_S.js";import{a as m}from"./DAxMji9q.js";import{I as _}from"./CUEp9C6H.js";import{c as A}from"./zx05KRmR.js";let E,w,T,S,I,h,D,M,p,P,v,L,F,R,B,O,k,Y,l,U,x,K,G,W,z,j,X=Promise.all([(()=>{try{return J}catch{}})()]).then(async()=>{var y,f,g;const u={Normal:0,MCD:1,Safaricom:2},q=((y=n(s))==null?void 0:y.user_type)===u.Normal;(f=n(s))==null||f.user_type,u.MCD;let d;l=((g=n(s))==null?void 0:g.user_type)==u.Safaricom,G=[{label:"Jazzcash",value:"MWALLET",icon:_.JAZZ_ICON},{label:"Bank Transfer",value:"Bank",icon:_.BANK_ICON},{label:"Debit/Credit Card",value:"MIGS",icon:_.CARD_ICON}],E={ACCOUNT_TITLE:"Knowledge Platform Pvt. Ltd",IBAN:"PK15ASCM0007050200009699",ACCOUNT_NUMBER:"07050200009699",BANK_NAME:"Askari bank Ltd."},w={daily:{bgColor:"#79005A",textColor:"#79005A",gameNumberColor:"#EF5E99"},weekly:{bgColor:"#007400",textColor:"#007400",gameNumberColor:"#00FF00",perdayText:"6 Games / day",perdayTextBg:"#DEF9E6"},monthly:{discountBgColor:"#0086FF",bgColor:"#003C96",textColor:"#003C96",gameNumberColor:"#00C6FF",discountText:"Save 40%",perdayText:"6 Games / day",perdayTextBg:"#E5EDFB"}},O={daily:10,weekly:70,monthly:300},z={BUNDLE:"Bundle",GAMES:"Games"},T={bgColor:"#006400",textColor:"#000000",gameNumberColor:"#FFFFFF"},d={DAILY:"35643364-3938-3637-2d65-3535362d3131",WEEKLY:"37356237-6234-6139-2d65-3535362d3131",MONTHLY:"38633764-6463-6166-2d65-3535362d3131"},I={PHONE:"0800 720 291",EMAIL:"shupavugames@knowledgeplatform.com"},Y={fields:[{name:"email",type:"email",label:await N("email"),placeholder:"Enter your email",required:!0},{name:"instituteCity",label:"Timezone",type:"select",placeholder:"Select timezone",required:!0,layout:"full",options:Q,value:""}],buttons:[{label:await N("verify"),type:"submit",customClass:"w-full"}],handleSubmit:async a=>{},enableTurnstile:!1,turnstileSiteKey:""},S=async()=>{const a=n(s),t=a.active_role==="principal"?a.school_id:n(b).competition_id,e=a.active_role==="principal"?o.PRINCIPAL_PAYMENT_SUBSCRIPTIONS:o.PAYMENT_SUBSCRIPTIONS;return(await i(e,{competition_id:t})).data},x=function(a){const t=a.get("paycode"),e=Z(t),r=new URLSearchParams(e.replace(/@/g,"&")),c=r.get("transtatus");if(c==="2"||c==="3"){const C=parseInt(r.get("durdays"),10);return{success:!0,data:{transactionStatus:parseInt(c),transactionRef:r.get("tranref"),amount:r.get("amount"),durationMonths:C,payment_mode:r.get("paymode"),subscription_end_date:C}}}},M=function(a){console.log(a,"daysOrDate");let t;if(typeof a=="string"&&a.trim()!==""&&!isNaN(Date.parse(a)))t=new Date(a),t.setDate(t.getDate()+1);else if(typeof a=="number")t=new Date,t.setDate(t.getDate()+a);else throw new Error("Invalid input: must be a number or a valid date string");return p(t)},p=function(a){const t={year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("en-US",t)},v=function(a){switch(a){case"MWALLET":return"Mobile Wallet";case"CARD":case"card":return"Credit/Debit Card";default:return a||"Unknown"}},h=function(a){var r;const t=n(b),e=n(s);return{grade:((r=t==null?void 0:t.current_grade)==null?void 0:r.toString())||"0",subscription_id:a[0].id,duration_in_days:a[0].duration_in_days,amount:a[0].amount,authToken:e.auth_token,system_id:e.active_role==="principal"?+e.school_id:t==null?void 0:t.competition_id,user_id:e.user_id,username:e.username,email:e.email,vendor_id:a[0].payment_vendor_guid}},D=async a=>{let t;return typeof a=="object"&&a!==null&&(t={...a},delete t.authToken,delete t.vendor_id),(await i(o.BANK_TRANSFER,{...t,payment_gateway:"2",payment_mode:"BankTransfer",vendor_uid:a.vendor_id})).data},K=async a=>{const t=await i(o.PROCESS_DPO_PAYMENT,{...a});t.error_code||(window.location.href=t.paymentRedirectUrl)},U=async a=>{const t=await i(o.SAFARICOM_PAYMENT,{...a});t.error_code===0&&(window.location.href=t.data.url)},j=async a=>await i(o.VERIFY_DPO_PAYMENT,{transaction_token:a}),P=async a=>await i(o.VERIFY_SAFARICOM_PAYMENT,{epgw_payment_payload:a}),R=function(a){if(a)return m?a.response_status==="000":a.transactionStatus===2},F=function(a,t){return t(a?"payment_success":"payment_failed")},B=function(a,t){return!a&&m&&l?H(t):t(m?a?"shupavu_success_description":"shupavu_failed_description":a?"payment_success_description":"payment_failed_description")},k=function(a){return console.log(a,"bundles"),l?a==null?void 0:a.filter(t=>t.subscription_guid===d.DAILY):q?a==null?void 0:a.filter(t=>t.subscription_guid===d.WEEKLY||t.subscription_guid===d.MONTHLY):a};function H(a){const t={100:a("gateway_issue"),305:a("safari_api_error"),400:a("fraud_detected"),700:a("link_expired"),800:a("user_declined"),900:a("user_already_has_subscribed")},e=window.location.href,r=new URL(e).searchParams.get("epgw_status");return r&&t[r]?t[r]:""}L=async()=>{await V();let a={grade:n(A).current_grade,competition_id:n(A).competition_id};const t=await i(o.SUBSCRIPTION_DETAILS,{...a});return{payment_mode:t.data.paymentMode,amount:t.data.amount,subscription_end_date:t.data.subscriptionEndDate,transactionDate:t.data.subscriptionStartDate,transactionToken:t.data.transactionToken}},W=async a=>await i(o.CANCEL_SUBSCRIPTION,{transaction_token:a})});export{E as B,w as C,T as D,S as G,I as P,X as __tla,h as a,D as b,M as c,p as d,P as e,v as f,L as g,F as h,R as i,B as j,O as k,k as l,Y as m,l as n,U as o,x as p,K as q,G as r,W as s,z as t,j as v};
