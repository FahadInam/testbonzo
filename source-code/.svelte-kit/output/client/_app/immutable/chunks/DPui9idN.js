import{K as ee,h as ne,M as E,N as P,i as S,O as re,j as te,g as F,e as ae,P as se,Q as G,R as Q,q,T as le,U as J,k as L,o as fe,V as T,W as Z,y as ie,X as $,Y as U,Z as M,_ as V,$ as oe,a0 as O,a1 as ue,a2 as ve,a3 as de,a4 as pe,a5 as he,a6 as xe,a7 as ce,a8 as ge}from"./BWmI7Kwv.js";function me(l,e){return e}function ke(l,e,n,i){for(var u=[],d=e.length,o=0;o<d;o++)de(e[o].e,u,!0);var p=d>0&&u.length===0&&n!==null;if(p){var m=n.parentNode;pe(m),m.append(n),i.clear(),N(l,e[0].prev,e[d-1].next)}he(u,()=>{for(var x=0;x<d;x++){var v=e[x];p||(i.delete(v.k),N(l,v.prev,v.next)),xe(v.e,!p)}})}function ye(l,e,n,i,u,d=null){var o=l,p={items:new Map,first:null},m=(e&E)!==0;if(m){var x=l;o=S?P(re(x)):x.appendChild(ee())}S&&te();var v=null,b=!1,a=ae(()=>{var f=n();return ue(f)?f:f==null?[]:Z(f)});ne(()=>{var f=F(a),r=f.length;if(b&&r===0)return;b=r===0;let y=!1;if(S){var c=o.data===se;c!==(r===0)&&(o=G(),P(o),Q(!1),y=!0)}if(S){for(var g=null,k,h=0;h<r;h++){if(q.nodeType===8&&q.data===le){o=q,y=!0,Q(!1);break}var t=f[h],s=i(t,h);k=A(q,p,g,null,t,s,h,u,e,n),p.items.set(s,k),g=k}r>0&&P(G())}S||we(f,p,o,u,e,i,n),d!==null&&(r===0?v?J(v):v=L(()=>d(o)):v!==null&&fe(v,()=>{v=null})),y&&Q(!0),F(a)}),S&&(o=q)}function we(l,e,n,i,u,d,o){var X,Y,z,B;var p=(u&ve)!==0,m=(u&(U|V))!==0,x=l.length,v=e.items,b=e.first,a=b,f,r=null,y,c=[],g=[],k,h,t,s;if(p)for(s=0;s<x;s+=1)k=l[s],h=d(k,s),t=v.get(h),t!==void 0&&((X=t.a)==null||X.measure(),(y??(y=new Set)).add(t));for(s=0;s<x;s+=1){if(k=l[s],h=d(k,s),t=v.get(h),t===void 0){var R=a?a.e.nodes_start:n;r=A(R,e,r,r===null?e.first:r.next,k,h,s,i,u,o),v.set(h,r),c=[],g=[],a=r.next;continue}if(m&&Ne(t,k,s,u),t.e.f&T&&(J(t.e),p&&((Y=t.a)==null||Y.unfix(),(y??(y=new Set)).delete(t))),t!==a){if(f!==void 0&&f.has(t)){if(c.length<g.length){var C=g[0],w;r=C.prev;var W=c[0],I=c[c.length-1];for(w=0;w<c.length;w+=1)H(c[w],C,n);for(w=0;w<g.length;w+=1)f.delete(g[w]);N(e,W.prev,I.next),N(e,r,W),N(e,I,C),a=C,r=I,s-=1,c=[],g=[]}else f.delete(t),H(t,a,n),N(e,t.prev,t.next),N(e,t,r===null?e.first:r.next),N(e,r,t),r=t;continue}for(c=[],g=[];a!==null&&a.k!==h;)a.e.f&T||(f??(f=new Set)).add(a),g.push(a),a=a.next;if(a===null)continue;t=a}c.push(t),r=t,a=t.next}if(a!==null||f!==void 0){for(var j=f===void 0?[]:Z(f);a!==null;)a.e.f&T||j.push(a),a=a.next;var K=j.length;if(K>0){var _=u&E&&x===0?n:null;if(p){for(s=0;s<K;s+=1)(z=j[s].a)==null||z.measure();for(s=0;s<K;s+=1)(B=j[s].a)==null||B.fix()}ke(e,j,_,v)}}p&&ie(()=>{var D;if(y!==void 0)for(t of y)(D=t.a)==null||D.apply()}),$.first=e.first&&e.first.e,$.last=r&&r.e}function Ne(l,e,n,i){i&U&&M(l.v,e),i&V?M(l.i,n):l.i=n}function A(l,e,n,i,u,d,o,p,m,x){var v=(m&U)!==0,b=(m&ce)===0,a=v?b?oe(u):O(u):u,f=m&V?O(o):o,r={i:f,v:a,k:d,a:null,e:null,prev:n,next:i};try{return r.e=L(()=>p(l,a,f,x),S),r.e.prev=n&&n.e,r.e.next=i&&i.e,n===null?e.first=r:(n.next=r,n.e.next=r.e),i!==null&&(i.prev=r,i.e.prev=r.e),r}finally{}}function H(l,e,n){for(var i=l.next?l.next.e.nodes_start:n,u=e?e.e.nodes_start:n,d=l.e.nodes_start;d!==i;){var o=ge(d);u.before(d),d=o}}function N(l,e,n){e===null?l.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}export{ye as e,me as i};
