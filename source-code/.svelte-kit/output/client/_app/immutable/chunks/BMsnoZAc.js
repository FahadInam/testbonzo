import{g as r}from"./CS3uJLGD.js";import{u as s}from"./rUUE80t4.js";import{r as v}from"./KMGk3Nas.js";import{i as A,u as _,e as N,g as l}from"./CpOe2gu7.js";import{A as G,__tla as I}from"./xsk9tW-i.js";import{s as g}from"./CVxajco_.js";import{g as O}from"./B_ot-s7H.js";import{b as S,d as k,m as x,s as C,__tla as D}from"./DO_Z3Jwx.js";import{g as n}from"./Bhxzz1gg.js";import{c as d}from"./zx05KRmR.js";import{t as E}from"./CoSslMj8.js";import{g as L}from"./KgIHh09F.js";let p,P=Promise.all([(()=>{try{return I}catch{}})(),(()=>{try{return D}catch{}})()]).then(async()=>{let u="demouserguestmode@kp.com",b="7b27d885967fb69b6cf101dffbe76f1df1147cae26d3f17bad8db1b9cc9b8896";async function h(){const i=r(A).instance_id,a=await v(G.LOGIN_USER,{username:u,password:b},{definitionOverrides:{loader:!0},headers:{instance_id:i}});(a==null?void 0:a.error_code)==0?(s.set(a.data[0]),_(O,"guest_mode",!0),_(s,"is_guest_mode",!0)):(a==null?void 0:a.error_code)<0&&g(a==null?void 0:a.error_message)}p=async function(i){var c,m;let a=[];{const f=i.competition_name,w=(c=r(s))==null?void 0:c.user_id,y=(m=r(s))==null?void 0:m.active_role;if(w||await h(),f){let t=null;if(r(d).competition_id)t=r(d);else{const e=await S();t=N(f,e.data.competitions,"url")}if(t){if(d.set(t),!t.current_grade){const e=await k();if(!Array.isArray(e.data.grades)||e.data.grades.length==0)console.warn("No grade found for this competition."),g(await L("no_content")),n("/competitions");else{const o=x(e.data.grades);l.set({grades:e.data.grades,current_grade:e.data.current_grade||"0"}),console.log("this is grades set",l,o),o.length==1?await C(o[0].value):y!=="principal"&&(E.set(o),n("/settings/change-grade"))}}}else console.warn("No competition found."),n("/competitions")}}return{data:a}}});export{P as __tla,p as c};
