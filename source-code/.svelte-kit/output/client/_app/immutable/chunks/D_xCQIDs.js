import{I as l}from"./_Vcui5w2.js";import{f as L,c as f,m as Z,a as $}from"./DWJ43-ZD.js";import{g as p,w as ee}from"./C_S5TygX.js";import{g as u}from"./Bvbqq-zN.js";import{A as R,__tla as ae}from"./Djyhf4cp.js";import{r as B}from"./CR2liGHp.js";import"./BDr9Qe-U.js";import"./69_IOA4Y.js";import{p as te,g as c,m as S,b as _,l as ie,F as oe,d as re,c as h,r as y,s as N,t as se,a as ne}from"./BWmI7Kwv.js";import{e as le}from"./Cio8JTVh.js";import{t as O,a as k}from"./cR8EBM7j.js";import{i as ce}from"./DJyY-Ao_.js";import{s as z}from"./Dui37nOO.js";import{b as de}from"./CzvvLib5.js";import{i as me}from"./CvLKQSYC.js";import{p as g}from"./Dtj4eyj4.js";import{o as fe,a as pe}from"./DjNUT-oc.js";import{B as ue}from"./BErKQ2SA.js";let G,M,P,F,W,Y,H,_e=Promise.all([(()=>{try{return ae}catch{}})()]).then(async()=>{F=async function(){await L();const a=p(f).current_grade,t=p(f).competition_id;return await B(R.REWARDS,{competition_id:t,grade:a},{})},H=async function(a){await L();const t=p(f).current_grade,o=p(f).competition_id;return await B(R.CERTIFICATE_NAME_UPDATE,{competition_id:o,grade:t,full_name:a},{})},Y=function(a){return{0:l.DAILY_BADGE,1:l.WEEKLY_BADGE,3:l.MONTHLY_BADGE}[a]||""},W=function(a,t){let o={},i=a?JSON.parse(Z(a)||"{}"):"";return i&&(o={reward_type:-1,image:l.CERTIFICATE_IMAGE,title:i.certificate_data.certificate_title,primary_text:t===1?i.certificate_data.certified_desc:i.certificate_data.non_certified_desc,instructions:t===1?i.certificate_data.certified_popup:i.certificate_data.non_certified_popup,...i}),o},P=[{label:await u("all_rewards"),value:0},{label:await u("earned_rewards"),value:1},{label:await u("competition_rewards"),value:2},{label:await u("claimed_redeemed_rewards"),value:3}],M=function(a,t){const o={Claimed:a,"How to Earn":a,Download:"Claim Certificate"},i=a==="Download"?"Congratulations!":"Instructions";return{title:o[a]||a,instructionTitle:i,detailsText:t.instructions,type:a==="Download"?1:0}};var V=O('<div class="absolute inset-0 flex items-center justify-center bg-gray-100 z-10">Loading...</div>'),j=O('<div class="fixed inset-0 bg-white shadow-lg flex flex-col overflow-hidden w-full h-full z-[9999]"><div class="absolute z-10 right-4 top-[10px]"><!></div> <div class="relative flex-1 w-full h-full"><!> <iframe class="absolute inset-0 w-full h-full border-none"></iframe></div></div>');G=function(a,t){te(t,!1);let o=g(t,"url",8,""),i=g(t,"showIframe",8,!0),J=g(t,"onClose",8,()=>{}),s=g(t,"messageContent",8,""),d=S(!0),w=!0,n=S(),v=ee(""),C;function K(){_(d,!1)}$.set({visible:!1,isLogoVisible:!1,isProfileVisible:!1});function A(e){const r=["http://localhost:5173","globalclimateliteracy.org","localhost",".netlify.app","knowledgeplatform"];if(e.origin!=="*"&&!r.some(X=>e.origin.includes(X))){console.warn("Received message from untrusted origin:",e.origin);return}const{type:D,payload:T}=e.data;D==="RESPONSE"?(w=!1,T==="ABC"&&console.log("payload: ",T)):console.warn("Unknown message type:",D)}function U(){c(n).contentWindow&&v.update(e=>(console.log(e,"data"),e&&e.length>0&&setTimeout(()=>{const r={type:"CERT_DATA",payload:e};console.log(r,"message"),c(n).contentWindow.postMessage(r,"*")},500),e))}fe(()=>{window.addEventListener("message",A),C=setInterval(()=>{var e;w&&i()&&!c(d)&&((e=s())==null?void 0:e.length)>0&&(v.set(s()),U())},5e3)}),pe(()=>{window.removeEventListener("message",A),clearInterval(C),_(d,!0),w=!0}),ie(()=>oe(s()),()=>{var e;((e=s())==null?void 0:e.length)>0&&v.set(s())}),re(),me();var b=j(),E=h(b),q=h(E);ue(q,{get image(){return l.CLOSE_ICON},size:"small",customClass:"w-[48px] h-[44px] border-2 border-black drop-shadow",onClick:()=>{J()(),_(n,"")}}),y(E);var I=N(E,2),x=h(I);{var Q=e=>{var r=V();k(e,r)};ce(x,e=>{c(d)&&e(Q)})}var m=N(x,2);z(m,"title","ABC"),de(m,e=>_(n,e),()=>c(n)),y(I),y(b),se(()=>z(m,"src",o())),le("load",m,K),k(a,b),ne()}});export{G as D,M as I,P as R,_e as __tla,F as a,W as b,Y as g,H as u};
