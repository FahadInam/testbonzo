import{r as o}from"./CR2liGHp.js";import{g as i}from"./C_S5TygX.js";import{A as r,__tla as W}from"./Djyhf4cp.js";import{f as z,c as _,m as q}from"./DWJ43-ZD.js";import{p}from"./Cj1nadwp.js";import{g as y,u as f}from"./Bvbqq-zN.js";import{a as H}from"./vNnwmH_S.js";import{a as l}from"./CJxW89IG.js";import{i as g,a as j}from"./BwH_vxp2.js";import{I as u}from"./_Vcui5w2.js";let C,b,A,E,N,w,T,S,c,I,h,D,P,v,F,L,M,R,k,B,O,Y,U,x,K,J=Promise.all([(()=>{try{return W}catch{}})()]).then(async()=>{let s;Y=[{label:"Jazzcash",value:"MWALLET",icon:u.JAZZ_ICON},{label:"Bank Transfer",value:"Bank",icon:u.BANK_ICON},{label:"Debit/Credit Card",value:"MIGS",icon:u.CARD_ICON}],C={ACCOUNT_TITLE:"Knowledge Platform Pvt. Ltd",IBAN:"PK15ASCM0007050200009699",ACCOUNT_NUMBER:"07050200009699",BANK_NAME:"Askari bank Ltd."},b={daily:{bgColor:"#79005A",textColor:"#79005A",gameNumberColor:"#EF5E99"},weekly:{bgColor:"#007400",textColor:"#007400",gameNumberColor:"#00FF00",perdayText:"6 Games / day",perdayTextBg:"#DEF9E6"},monthly:{discountBgColor:"#0086FF",bgColor:"#003C96",textColor:"#003C96",gameNumberColor:"#00C6FF",discountText:"Save 40%",perdayText:"6 Games / day",perdayTextBg:"#E5EDFB"}},L={daily:10,weekly:70,monthly:300},x={BUNDLE:"Bundle",GAMES:"Games"},A={bgColor:"#006400",textColor:"#000000",gameNumberColor:"#FFFFFF"},s={DAILY:"35643364-3938-3637-2d65-3535362d3131",WEEKLY:"37356237-6234-6139-2d65-3535362d3131",MONTHLY:"38633764-6463-6166-2d65-3535362d3131"},N={PHONE:"0800 720 291",EMAIL:"shupavugames@knowledgeplatform.com"},R={fields:[{name:"email",type:"email",label:await y("email"),placeholder:"Enter your email",required:!0},{name:"instituteCity",label:"Timezone",type:"select",placeholder:"Select timezone",required:!0,layout:"full",options:H,value:""}],buttons:[{label:await y("verify"),type:"submit",customClass:"w-full"}],handleSubmit:async a=>{},enableTurnstile:!1,turnstileSiteKey:""},E=async()=>{const a=i(f),t=a.active_role==="principal"?a.school_id:i(p).competition_id,e=a.active_role==="principal"?r.PRINCIPAL_PAYMENT_SUBSCRIPTIONS:r.PAYMENT_SUBSCRIPTIONS;return(await o(e,{competition_id:t})).data},O=function(a){const t=a.get("paycode"),e=q(t),n=new URLSearchParams(e.replace(/@/g,"&")),d=n.get("transtatus");if(d==="2"||d==="3"){const m=parseInt(n.get("durdays"),10);return{success:!0,data:{transactionStatus:parseInt(d),transactionRef:n.get("tranref"),amount:n.get("amount"),durationMonths:m,payment_mode:n.get("paymode"),subscription_end_date:m}}}},S=function(a){console.log(a,"daysOrDate");let t;if(typeof a=="string"&&a.trim()!==""&&!isNaN(Date.parse(a)))t=new Date(a),t.setDate(t.getDate()+1);else if(typeof a=="number")t=new Date,t.setDate(t.getDate()+a);else throw new Error("Invalid input: must be a number or a valid date string");return c(t)},c=function(a){const t={year:"numeric",month:"long",day:"numeric"};return a.toLocaleDateString("en-US",t)},h=function(a){switch(a){case"MWALLET":return"Mobile Wallet";case"CARD":case"card":return"Credit/Debit Card";default:return a||"Unknown"}},w=function(a){var n;const t=i(p),e=i(f);return{grade:((n=t==null?void 0:t.current_grade)==null?void 0:n.toString())||"0",subscription_id:a[0].id,duration_in_days:a[0].duration_in_days,amount:a[0].amount,authToken:e.auth_token,system_id:e.active_role==="principal"?+e.school_id:t==null?void 0:t.competition_id,user_id:e.user_id,username:e.username,email:e.email,vendor_id:a[0].payment_vendor_guid}},T=async a=>{let t;return typeof a=="object"&&a!==null&&(t={...a},delete t.authToken,delete t.vendor_id),(await o(r.BANK_TRANSFER,{...t,payment_gateway:"2",payment_mode:"BankTransfer",vendor_uid:a.vendor_id})).data},B=async a=>{const t=await o(r.PROCESS_DPO_PAYMENT,{...a});t.error_code||(window.location.href=t.paymentRedirectUrl)},k=async a=>{const t=await o(r.SAFARICOM_PAYMENT,{...a});t.error_code===0&&(window.location.href=t.data.url)},K=async a=>await o(r.VERIFY_DPO_PAYMENT,{transaction_token:a}),I=async a=>await o(r.VERIFY_SAFARICOM_PAYMENT,{epgw_payment_payload:a}),v=function(a){if(a)return l?a.response_status==="000":a.transactionStatus===2},P=function(a,t){return t(a?"payment_success":"payment_failed")},F=function(a,t){return!a&&l&&g()?G(t):t(l?a?"shupavu_success_description":"shupavu_failed_description":a?"payment_success_description":"payment_failed_description")},M=function(a){return g()?a==null?void 0:a.filter(t=>t.subscription_guid===s.DAILY):j()?a==null?void 0:a.filter(t=>t.subscription_guid===s.WEEKLY||t.subscription_guid===s.MONTHLY):a};function G(a){const t={100:a("gateway_issue"),305:a("safari_api_error"),400:a("fraud_detected"),700:a("link_expired"),800:a("user_declined"),900:a("user_already_has_subscribed")},e=window.location.href,n=new URL(e).searchParams.get("epgw_status");return n&&t[n]?t[n]:""}D=async()=>{await z();let a={grade:i(_).current_grade,competition_id:i(_).competition_id};const t=await o(r.SUBSCRIPTION_DETAILS,{...a});return{payment_mode:t.data.paymentMode,amount:t.data.amount,subscription_end_date:t.data.subscriptionEndDate,transactionDate:t.data.subscriptionStartDate,transactionToken:t.data.transactionToken}},U=async a=>await o(r.CANCEL_SUBSCRIPTION,{transaction_token:a})});export{C as B,b as C,A as D,E as G,N as P,J as __tla,w as a,T as b,S as c,c as d,I as e,h as f,D as g,P as h,v as i,F as j,L as k,M as l,R as m,k as n,B as o,O as p,Y as q,U as s,x as t,K as v};
