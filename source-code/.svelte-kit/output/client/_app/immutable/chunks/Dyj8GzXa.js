import{I as l}from"./CUEp9C6H.js";import{b as L,j as Z}from"./CpOe2gu7.js";import{g as f,w as $}from"./CS3uJLGD.js";import{g as p}from"./KgIHh09F.js";import{c as u,a as ee}from"./zx05KRmR.js";import{A as R,__tla as ae}from"./xsk9tW-i.js";import{r as B}from"./KMGk3Nas.js";import"./BDr9Qe-U.js";import"./69_IOA4Y.js";import{p as te,g as c,m as S,b as _,l as ie,F as oe,e as re,c as h,r as y,s as M,t as se,a as ne}from"./UMRfY9Ko.js";import{e as le}from"./D7M_RLsn.js";import{t as N,a as O}from"./D7kVQxiR.js";import{i as ce}from"./C8EeH_y7.js";import{s as k}from"./CBgq6MFg.js";import{b as me}from"./BqU0DZvs.js";import{i as de}from"./DwRdgw7B.js";import{p as g}from"./CSfE_DI5.js";import{o as fe,a as pe}from"./D_1OQ_gr.js";import{B as ue}from"./D3Jopq65.js";let z,G,P,F,W,Y,j,_e=Promise.all([(()=>{try{return ae}catch{}})()]).then(async()=>{F=async function(){await L();const a=f(u).current_grade,t=f(u).competition_id;return await B(R.REWARDS,{competition_id:t,grade:a},{})},j=async function(a){await L();const t=f(u).current_grade,o=f(u).competition_id;return await B(R.CERTIFICATE_NAME_UPDATE,{competition_id:o,grade:t,full_name:a},{})},Y=function(a){return{0:l.DAILY_BADGE,1:l.WEEKLY_BADGE,3:l.MONTHLY_BADGE}[a]||""},W=function(a,t){let o={},i=a?JSON.parse(Z(a)||"{}"):"";return i&&(o={reward_type:-1,image:l.CERTIFICATE_IMAGE,title:i.certificate_data.certificate_title,primary_text:t===1?i.certificate_data.certified_desc:i.certificate_data.non_certified_desc,instructions:t===1?i.certificate_data.certified_popup:i.certificate_data.non_certified_popup,...i}),o},P=[{label:await p("all_rewards"),value:0},{label:await p("earned_rewards"),value:1},{label:await p("competition_rewards"),value:2},{label:await p("claimed_redeemed_rewards"),value:3}],G=function(a,t){const o={Claimed:a,"How to Earn":a,Download:"Claim Certificate"},i=a==="Download"?"Congratulations!":"Instructions";return{title:o[a]||a,instructionTitle:i,detailsText:t.instructions,type:a==="Download"?1:0}};var H=N('<div class="absolute inset-0 flex items-center justify-center bg-gray-100 z-10">Loading...</div>'),V=N('<div class="fixed inset-0 bg-white shadow-lg flex flex-col overflow-hidden w-full h-full z-[9999]"><div class="absolute z-10 right-4 top-[10px]"><!></div> <div class="relative flex-1 w-full h-full"><!> <iframe class="absolute inset-0 w-full h-full border-none"></iframe></div></div>');z=function(a,t){te(t,!1);let o=g(t,"url",8,""),i=g(t,"showIframe",8,!0),J=g(t,"onClose",8,()=>{}),s=g(t,"messageContent",8,""),m=S(!0),w=!0,n=S(),v=$(""),C;function K(){_(m,!1)}ee.set({visible:!1,isLogoVisible:!1,isProfileVisible:!1});function A(e){const r=["http://localhost:5173","globalclimateliteracy.org","localhost",".netlify.app","knowledgeplatform"];if(e.origin!=="*"&&!r.some(X=>e.origin.includes(X))){console.warn("Received message from untrusted origin:",e.origin);return}const{type:T,payload:D}=e.data;T==="RESPONSE"?(w=!1,D==="ABC"&&console.log("payload: ",D)):console.warn("Unknown message type:",T)}function U(){c(n).contentWindow&&v.update(e=>(console.log(e,"data"),e&&e.length>0&&setTimeout(()=>{const r={type:"CERT_DATA",payload:e};console.log(r,"message"),c(n).contentWindow.postMessage(r,"*")},500),e))}fe(()=>{window.addEventListener("message",A),C=setInterval(()=>{var e;w&&i()&&!c(m)&&((e=s())==null?void 0:e.length)>0&&(v.set(s()),U())},5e3)}),pe(()=>{window.removeEventListener("message",A),clearInterval(C),_(m,!0),w=!0}),ie(()=>oe(s()),()=>{var e;((e=s())==null?void 0:e.length)>0&&v.set(s())}),re(),de();var b=V(),E=h(b),q=h(E);ue(q,{get image(){return l.CLOSE_ICON},size:"small",customClass:"w-[48px] h-[44px] border-2 border-black drop-shadow",onClick:()=>{J()(),_(n,"")}}),y(E);var I=M(E,2),x=h(I);{var Q=e=>{var r=H();O(e,r)};ce(x,e=>{c(m)&&e(Q)})}var d=M(x,2);k(d,"title","ABC"),me(d,e=>_(n,e),()=>c(n)),y(I),y(b),se(()=>k(d,"src",o())),le("load",d,K),O(a,b),ne()}});export{z as D,G as I,P as R,_e as __tla,F as a,W as b,Y as g,j as u};
