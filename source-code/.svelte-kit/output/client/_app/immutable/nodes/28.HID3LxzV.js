import{r as ze}from"../chunks/DxGJWrS1.js";import{g as gt}from"../chunks/C_S5TygX.js";import{c as Ot,__tla as je}from"../chunks/DqqvuqO8.js";import{m as Re}from"../chunks/CuKIkSf6.js";import{u as Pt,t as Dt}from"../chunks/Bvbqq-zN.js";import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{c as a,s,r as o,t as T,p as yt,a as _t,e as h,g as t,m as A,b as w,l as H,d as Ae,f as ct}from"../chunks/BWmI7Kwv.js";import{s as g}from"../chunks/CpvBVgdC.js";import{i as j,s as Lt,a as it}from"../chunks/DJyY-Ao_.js";import{t as y,a as d,c as Ee}from"../chunks/cR8EBM7j.js";import{s as k}from"../chunks/Dui37nOO.js";import{s as bt,t as vt}from"../chunks/CQjx5DEQ.js";import{i as ht}from"../chunks/CvLKQSYC.js";import{p as z,s as St}from"../chunks/Dtj4eyj4.js";import{o as Mt}from"../chunks/DjNUT-oc.js";import{S as Ie}from"../chunks/BPoee8nT.js";import{I as J}from"../chunks/_Vcui5w2.js";import{d as Be,g as We,c as Oe,f as $t,__tla as Pe}from"../chunks/BOfNRF_K.js";import{B as Vt}from"../chunks/BErKQ2SA.js";import"../chunks/D7NkiQyh.js";import{g as De}from"../chunks/BoEBYeq-.js";import"../chunks/Bz4n4I_X.js";import{c as Le}from"../chunks/DWJ43-ZD.js";import{A as Me}from"../chunks/DrO32kRC.js";import{a as Ft,__tla as Ve}from"../chunks/RG-z8tzU.js";import{A as Fe,__tla as Ge}from"../chunks/6EA1Kz0r.js";import{e as Gt}from"../chunks/Cio8JTVh.js";import{p as Ye}from"../chunks/Do5AT5O5.js";let Yt,Kt,Ke=Promise.all([(()=>{try{return je}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return Ge}catch{}})()]).then(async()=>{function Ut({url:F}){var p;{const m=gt(Ot),E=gt(Re),r=gt(Pt).is_guest_mode;if(console.log(m,E,"resultStoreValue, metaStoreValue"),((p=m==null?void 0:m.player)==null?void 0:p.avatar)===null&&!r)throw ze(302,`/competitions/${E.url}/home`)}return{}}Kt=Object.freeze(Object.defineProperty({__proto__:null,load:Ut},Symbol.toStringTag,{value:"Module"}));var Xt=y('<div class="w-20 px-2 font-poppins text-[16px] font-semibold leading-[34.91px] text-white whitespace-nowrap overflow-ellipsis"> </div>'),Zt=y('<div class="flex min-w-[250px] max-h-[38px] items-center rounded-full bg-black/50 text-white text-center m-1"><!> <div class="w-[135px] rounded-full bg-black px-2 text-center font-poppins text-[16px] font-semibold leading-[34.91px] text-white"> </div> <div class="w-20 px-2 font-poppins text-[16px] font-semibold leading-[34.91px] text-white whitespace-nowrap overflow-ellipsis"> </div></div>');function dt(F,p){let m=z(p,"l",8,""),E=z(p,"v",8,"-"),r=z(p,"v2",8),S=typeof r()=="number"||typeof r()=="string";var I=Zt();k(I,"style",`justify-content: ${(S?"space-around":"space-between")??""};`);var l=a(I);{var Q=u=>{var _=Xt(),L=a(_,!0);o(_),T(()=>g(L,E()||"-")),d(u,_)};j(l,u=>{S&&u(Q)})}var c=s(l,2),D=a(c,!0);o(c);var i=s(c,2),x=a(i,!0);o(i),o(I),T(()=>{g(D,m()||""),g(x,S?r()||0:E()||"-")}),d(F,I)}var Ht=y('<div class="bonzoui__winner__ribbon bonzoui__winner__ribbon_MP win2x"><img class="w-[110px] md:w-[200px] h-auto object-contain" alt="Winner"> <span class="pb-title-shadow text-[14px] md:text-[26px] md:top-[2px] top-[-5px]" style="position: absolute; left: 0;"> </span></div>'),Jt=y('<div><!> <div><!></div> <p class="text-white mt-2 w-[140px] md:w-[200px] text-center font-bold truncate text-[16px] md:text-lg"> </p></div>');function Ct(F,p){yt(p,!1);const[m,E]=Lt(),r=()=>it(Dt,"$t",m);let S=z(p,"playerName",8,""),I=z(p,"avatarType",8,""),l=z(p,"isWinner",8,!1),Q=z(p,"bgColor",8,"bg-pink-500"),c=z(p,"position",8,"left"),D=z(p,"ml",8,10),i=z(p,"mr",8,10),x=z(p,"size",8,72);ht();var u=Jt(),_=a(u);{var L=R=>{var B=Ht();k(B,"style",{left:0,right:0});var et=a(B),Y=s(et,2),K=a(Y,!0);o(Y),o(B),T(mt=>{k(et,"src",J.RIBBON_WINNER),g(K,mt)},[()=>r()("winner")],h),d(R,B)};j(_,R=>{l()&&R(L)})}var G=s(_,2),tt=a(G);Me(tt,{get t(){return I()},get ml(){return D()},get mr(){return i()},get s(){return x()},get u(){return x()}}),o(G);var $=s(G,2),C=a($,!0);o($),o(u),T(()=>{bt(u,`player-card ${(c()==="left"?"pr-[1.7rem]":"pl-[1.7rem]")??""} w-full py-6 flex flex-col items-center relative ${(c()==="left"?"rounded-l-xl":"rounded-r-xl")??""} svelte-qxw9fc`),bt(G,`w-18 h-18 rounded-full overflow-hidden mb-2 ${Q()??""} svelte-qxw9fc`),g(C,S())}),d(F,u),_t(),E()}var Qt=y('<div class="coinMovementContainer svelte-i7qp4o"><div class="movingCoin coin1 svelte-i7qp4o"></div> <div class="movingCoin coin2 svelte-i7qp4o"></div> <div class="movingCoin coin3 svelte-i7qp4o"></div> <div class="movingCoin coin4 svelte-i7qp4o"></div> <div class="movingCoin coin5 svelte-i7qp4o"></div></div>'),te=y('<div class="baseDiv svelte-i7qp4o"><div class="baseAnimDiv svelte-i7qp4o"><div class="raysBackground svelte-i7qp4o"></div> <div></div> <div class="starSmall starSmall1 svelte-i7qp4o" style="--left: calc(50vw - 4%); --top: calc(50vh - 8%); --w: 40px; --h: 30px;"></div> <div class="starSmall starSmall2 svelte-i7qp4o" style="--left: calc(50vw + 15%); --top: calc(50vh + 12%); --w: 30px; --h: 30px;"></div> <div class="starSmall starSmall3 svelte-i7qp4o" style="--left: calc(50vw - 23%); --top: calc(50vh + 8%); --w: 40px; --h: 40px;"></div> <div class="starSmall starSmall4 svelte-i7qp4o" style="--left: calc(50vw - 8%); --top: calc(50vh - 17%); --w: 30px; --h: 30px;"></div> <div class="starSmall starSmall5 svelte-i7qp4o" style="--left: calc(50vw + 4%); --top: calc(50vh + 8%); --w: 40px; --h: 40px;"></div> <div class="starSmall starSmall6 svelte-i7qp4o" style="--left: calc(50vw - 16%); --top: calc(50vh - 22%); --w: 30px; --h: 30px;"></div> <div class="starSmall starSmall7 svelte-i7qp4o" style="--left: calc(50vw + 12%); --top: calc(50vh - 25%); --w: 40px; --h: 40px;"></div> <div class="starSmall starSmall8 svelte-i7qp4o" style="--left: calc(50vw + 16%); --top: calc(50vh - 12%); --w: 30px; --h: 30px;"></div> <div class="amtTextAnim text-white text-[36px] md:text-[54px] font-bold title-shadow svelte-i7qp4o"> </div></div> <!></div>');function ee(F,p){yt(p,!1);let m=z(p,"isPocketGames",8,!1),E=z(p,"scoreToShow",8),r=z(p,"onComplete",8,()=>{}),S=A(!1),I=A(!1),l=A({x:0,y:0});function Q(){const $=document.querySelector(".coin-counter");if($){const C=$.getBoundingClientRect();w(l,{x:C.left+C.width/2,y:C.top+C.height/2}),console.log("Coin counter position:",t(l))}else console.warn("Coin counter element not found, using fallback position"),w(l,{x:window.innerWidth-140,y:window.innerHeight*.05})}function c(){console.log("Main animation ended"),w(S,!0),Q(),setTimeout(()=>{w(I,!0)},3e3)}function D(){console.log("All coin movements complete"),setTimeout(()=>{r()()},500)}ht();var i=te(),x=a(i),u=s(a(x),2),_=s(u,18),L=a(_);o(_),o(x);var G=s(x,2);{var tt=$=>{var C=Qt(),R=a(C),B=s(R,2),et=s(B,2),Y=s(et,2),K=s(Y,2);o(C),T(()=>{k(R,"style",`--target-x: ${t(l).x??""}px; --target-y: ${t(l).y??""}px;`),k(B,"style",`--target-x: ${t(l).x??""}px; --target-y: ${t(l).y??""}px;`),k(et,"style",`--target-x: ${t(l).x??""}px; --target-y: ${t(l).y??""}px;`),k(Y,"style",`--target-x: ${t(l).x??""}px; --target-y: ${t(l).y??""}px;`),k(K,"style",`--target-x: ${t(l).x??""}px; --target-y: ${t(l).y??""}px;`)}),Gt("animationend",R,D),d($,C)};j(G,$=>{t(I)&&$(tt)})}o(i),T(()=>{vt(i,"animation-ended",t(S)),bt(u,`${`coinsFront ${m()?"coinsFrontPG":""}`??""} svelte-i7qp4o`),g(L,`+ ${E()??""}`)}),Gt("animationend",x,c),d(F,i),_t()}var ae=y('<div class="bonzoui__semi__orange rounded-r-xl rounded-b-xl svelte-uy7unn"></div>'),oe=y('<div class="bonzoui__winner__ribbon mt-2" style="position: relative; left: 0px; right: 0px; top: 0px;"><img alt="Draw" class="w-[130px] md:w-[170px]"> <span class="bonzoui__draw__ribbon__text svelte-uy7unn" style="position: absolute; left: 0; right: 0;"> </span></div>'),se=y(`<div class="bg-[#000000CC] w-full relative rounded-[19px] mb-[44px] p-[12px] text-white flex mt-[49px] max-w-[290px] md:max-w-[320px] flex-col items-center justify-center"><div class="font-semibold pt-1 pl-[2rem] pb-1 pr-4 p-[2px] flex items-center justify-center text-[15px] md:text-[17px] text-[#ffc200] absolute top-0 bg-black left-0 rounded-[19px]"><div class="bonzoui__hint__bulb"></div> </div> <div class="flex flex-col items-center justify-center text-sm md:text-base"> <div class="font-bold text-[16px] md:text-[18px] text-[#ffe500]"><span class="text-[28px] md:text-[32px]">50%</span> <span style="font-family: 'Poppins', sans-serif; font-weight: 400;"> </span></div> </div></div>`),le=y('<div class="w-full mt-10 flex items-center justify-center"><img class="w-[120px] md:w-[160px] h-auto object-contain" alt="Winner"> <span class="text-white text-[36px] md:text-[54px] font-bold title-shadow"> </span></div>'),ie=y('<div class="bg-[#000000CC] w-full relative rounded-[19px] mb-[44px] p-[12px] text-white flex mt-[49px] max-w-[290px] md:max-w-[320px] flex-col items-center justify-center"><div class="font-bold text-[20px] md:text-[24px] text-[#ffc200]"> </div> <div class="text-[16px] md:text-[18px] text-center font-semibold font-poppins"> </div></div>'),re=y('<div class="bonzoui__winner__ribbon" style="position: relative !important;"><img alt="ribbon" class="w-[210px] md:w-[240px]"> <div class="bonzoui__single__result__ribbon__sp pb-title-shadow text-sm md:text-base mt-[-20%] md:mt-[-21%] svelte-uy7unn"> </div></div> <!>',1),ne=y('<div class="w-full flex items-center justify-center relative mt-4"><div class="w-1/2"><!></div> <div class="absolute z-10"><img alt="VS" class="w-16 h-16 md:w-24 md:h-24"></div> <div class="w-1/2"><!></div></div>'),pe=y('<div class="md:absolute w-1/2 md:w-auto md:mr-0 mt-4 md:mt-0 md:ml-0 flex flex-col justify-center items-center"><img class="w-[120px] md:w-[160px] h-auto object-contain" alt="Winner"> <span class="text-white w-[120px] text-center text-[18px] md:text-[24px] font-bold title-shadow"> </span></div>'),ce=y('<div class="w-full rounded-r-xl rounded-b-xl" style="background: linear-gradient(rgb(1, 238, 253) 0%, rgb(1, 137, 255) 100%);"><div class="flex flex-col relative items-center justify-center w-full"><!> <!> <!> <!> <div class="w-full pb-6 px-2 md:px-4 z-10 relative"><!> <div class="flex flex-col items-center space-y-4"><!> <!> <!></div></div></div></div> <div class="flex justify-center w-full mt-4"><!></div>',1),ve=y('<div class="flex flex-col items-center justify-center w-full max-w-4xl mx-auto my-4 px-2 relative z-4 result-content svelte-uy7unn"><!></div> <!> <!>',1);Yt=function(F,p){yt(p,!1);const[m,E]=Lt(),r=()=>it(Ot,"$resultStore",m),S=()=>it(Pt,"$userStore",m),I=()=>it(Ye,"$page",m),l=()=>it(Dt,"$t",m),Q=()=>it(Le,"$competitionStore",m),c=A(),D=A(),i=A(),x=A();let u=A("");const{playerWon:_,opponentWon:L,isDraw:G}=Be(r());let tt=A(!1),$=A(!1),C=A(!1),R=A(I().state);function B(){var v,q;return((q=(v=r())==null?void 0:v.player)==null?void 0:q.points)>0}function et(){w(C,!0),w($,!0),setTimeout(()=>{},800)}Mt(()=>{console.log("SCORE==========>",r()),console.log("checkForScore-->",B()),B();const v=setTimeout(()=>{const q=new Audio("/sound/result_audio.mp3");q.load();const rt=()=>{!t($)&&!t(C)&&B()&&!t(tt)&&(q.play(),w(tt,!0))};return q.addEventListener("canplaythrough",rt,{once:!0}),()=>{q.removeEventListener("canplaythrough",rt)}},500);return()=>clearTimeout(v)}),Mt(async()=>{Ft.set({visible:!1,page:""}),w(u,await We(t(c)))}),H(()=>(r(),S()),()=>{w(c,Oe(r(),S()))}),H(()=>r(),()=>{console.log(r(),"determineWinner")}),H(()=>t(R),()=>{t(R)&&t(R).coinAnimation===!1?(w(tt,!1),w($,!0)):w(R,!0)}),H(()=>r(),()=>{var v,q;w(D,((q=(v=r())==null?void 0:v.player)==null?void 0:q.points)??0)}),H(()=>r(),()=>{w(i,$t(r().player,r().opponent))}),H(()=>(r(),$t),()=>{(r().player||r().opponent)&&w(i,$t(r().player,r().opponent))}),H(()=>r(),()=>{var v,q;w(x,parseFloat((q=(v=r())==null?void 0:v.player)==null?void 0:q.accuracy)>=.5)}),H(()=>(t(u),t(x),t(i)),()=>{console.log(t(u),t(x),t(i),"gameData123")}),Ae(),ht();var Y=ve(),K=ct(Y),mt=a(K);const de=h(()=>t(c)?null:J.SINGLE_PLAYER_IMAGE);Ie(mt,{get icon(){return t(de)},get text(){return t(u)},padding:"px-4 pb-5",bgColor:"bg-blue-900",width:"w-full md:min-w-[920px]",children:(v,q)=>{var rt=ce(),xt=ct(rt),Nt=a(xt),Tt=a(Nt);{var fe=e=>{var n=ae();d(e,n)};j(Tt,e=>{t(c)&&e(fe)})}var kt=s(Tt,2);{var we=e=>{var n=oe(),f=a(n),O=s(f,2),U=a(O,!0);o(O),o(n),T(X=>{k(f,"src",J.RIBBON_DRAW),g(U,X)},[()=>l()("draw")],h),d(e,n)};j(kt,e=>{G&&t(c)&&e(we)})}var zt=s(kt,2);{var ge=e=>{var n=re(),f=ct(n),O=a(f),U=s(O,2),X=a(U,!0);o(U),o(f);var Z=s(f,2);{var ut=P=>{var W=se(),at=a(W),b=s(a(at));o(at);var pt=s(at,2),M=a(pt),N=s(M),V=s(a(N));V.nodeValue="  ";var ot=s(V),st=a(ot,!0);o(ot),o(N);var lt=s(N);o(pt),o(W),T((ft,wt,Te,ke)=>{g(b,` ${ft??""}`),g(M,`${wt??""}  `),g(st,Te),g(lt,`  
                ${ke??""}`)},[()=>l()("note"),()=>l()("achieve"),()=>l()("or_more_result_box"),()=>l()("to_unlock_result_box")],h),d(P,W)},nt=P=>{var W=Ee(),at=ct(W);{var b=M=>{var N=le(),V=a(N),ot=s(V,2),st=a(ot);o(ot),o(N),T(()=>{var lt;k(V,"src",J.MORE_COINS),g(st,`+ ${((lt=t(i))==null?void 0:lt.playerPoints)??""}`)}),d(M,N)},pt=M=>{var N=ie(),V=a(N),ot=a(V,!0);o(V);var st=s(V,2),lt=a(st,!0);o(st),o(N),T((ft,wt)=>{g(ot,ft),g(lt,wt)},[()=>l()("sign_up_now"),()=>l()("save_progress_unlock_rewards")],h),d(M,N)};j(at,M=>{var N;(N=S())!=null&&N.is_guest_mode?M(pt,!1):M(b)},!0)}d(P,W)};j(Z,P=>{var W;!t(x)&&!((W=S())!=null&&W.is_guest_mode)?P(ut):P(nt,!1)})}T(P=>{k(O,"src",t(x)?J.RIBBON_WINNER_CONGRATS:J.RIBBON_WINNER_LOSE),g(X,P)},[()=>t(x)?l()("congratulation"):l()("try_again")],h),d(e,n)};j(zt,e=>{t(c)||e(ge)})}var jt=s(zt,2);{var ye=e=>{var n=ne(),f=a(n),O=a(f);const U=h(()=>{var b;return(b=t(i))==null?void 0:b.playerName}),X=h(()=>{var b;return(b=t(i))==null?void 0:b.playerAvatar});Ct(O,{get playerName(){return t(U)},get avatarType(){return t(X)},bgColor:"bg-pink-500",position:"left",isWinner:_}),o(f);var Z=s(f,2),ut=a(Z);o(Z);var nt=s(Z,2),P=a(nt);const W=h(()=>{var b;return(b=t(i))==null?void 0:b.opponentName}),at=h(()=>{var b;return(b=t(i))==null?void 0:b.opponentAvatar});Ct(P,{get playerName(){return t(W)},get avatarType(){return t(at)},bgColor:"bg-pink-300",position:"right",isWinner:L}),o(nt),o(n),T(()=>k(ut,"src",J.VS)),d(e,n)};j(jt,e=>{t(c)&&e(ye)})}var Rt=s(jt,2),At=a(Rt);{var _e=e=>{var n=pe();k(n,"style",`${(_?"left: 15%; top: 40%;":"right: 0; left: 54%; top: 40%;")??""} transform: translateY(-50%);`),vt(n,"mr-auto",_),vt(n,"ml-auto",L);var f=a(n),O=s(f,2),U=a(O);o(O),o(n),T(()=>{var X,Z;k(f,"src",J.MORE_COINS),g(U,`+ ${(_?(X=t(i))==null?void 0:X.playerPoints:(Z=t(i))==null?void 0:Z.opponentPoints)??""}`)}),d(e,n)};j(At,e=>{(_||L)&&e(_e)})}var Et=s(At,2),It=a(Et);const be=h(()=>{var e;return(e=t(i))==null?void 0:e.score});dt(It,St({l:"Score",get v(){return t(be)}},()=>{var e;return t(c)&&((e=t(i))!=null&&e.opponentScore)?{v2:t(i).opponentScore}:t(c)&&{v2:"-"}}));var Bt=s(It,2);const he=h(()=>{var e;return(e=t(i))==null?void 0:e.accuracy});dt(Bt,St({l:"Accuracy",get v(){return t(he)}},()=>{var e;return t(c)&&((e=t(i))!=null&&e.opponentAccuracy)?{v2:t(i).opponentAccuracy}:{}}));var Se=s(Bt,2);const $e=h(()=>{var e;return(e=t(i))==null?void 0:e.timeTaken});dt(Se,St({l:"Time taken",get v(){return t($e)}},()=>{var e;return t(c)&&((e=t(i))!=null&&e.opponentTimeTaken)?{v2:t(i).opponentTimeTaken}:{}})),o(Et),o(Rt),o(Nt),o(xt);var Wt=s(xt,2),Ce=a(Wt);{var qe=e=>{const n=h(()=>l()("continue"));Vt(e,{get label(){return t(n)},size:"large",type:"3d-secondary",customClass:"w-[160px] text-lg md:text-[22px]",onClick:()=>{var f;De(`/competitions/${(f=Q())==null?void 0:f.url}/home`)}})},Ne=e=>{const n=h(()=>l()("signup"));Vt(e,{get label(){return t(n)},size:"large",type:"3d-secondary",customClass:"w-[160px] text-lg md:text-[22px]",onClick:()=>{Ft.set({visible:!0,page:"user-selection"})}})};j(Ce,e=>{var n;(n=S())!=null&&n.is_guest_mode?e(Ne,!1):e(qe)})}o(Wt),d(v,rt)},$$slots:{default:!0}}),o(K);var qt=s(K,2);{var me=v=>{ee(v,{get scoreToShow(){return t(D)},onComplete:et})};j(qt,v=>{t(D)>0&&!t($)&&v(me)})}var xe=s(qt,2);{var ue=v=>{Fe(v,{})};j(xe,v=>{v(ue)})}T(()=>vt(K,"fade-in",t(C))),d(F,Y),_t(),E()}});export{Ke as __tla,Yt as component,Kt as universal};
