import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{s as f,f as k,c as t,r as i,p as ba,t as J,a as ka,d as I,ad as Ia,b as n,m as c,g as e}from"../chunks/UMRfY9Ko.js";import{h as Na,s as K}from"../chunks/Bq4tIOc4.js";import{i as N,s as Ca,a as G}from"../chunks/C8EeH_y7.js";import{e as Q,i as W}from"../chunks/DiuJufaP.js";import{t as u,a as p,c as X}from"../chunks/D7kVQxiR.js";import{i as Ta}from"../chunks/DwRdgw7B.js";import{o as $a}from"../chunks/D_1OQ_gr.js";import{G as Ra}from"../chunks/q8EerHXB.js";import{C as ja}from"../chunks/Dd8h4-5k.js";import{t as Oa,g as Ua}from"../chunks/KgIHh09F.js";import{c as qa}from"../chunks/zx05KRmR.js";import{j as La,k as Pa,__tla as Sa}from"../chunks/DO_Z3Jwx.js";import{P as Ea}from"../chunks/C8WVGIBp.js";import{L as Ga,__tla as Aa}from"../chunks/DWTaXrMM.js";import{I as C}from"../chunks/CUEp9C6H.js";import{u as Da,P as Ha,r as Va,b as Ya,c as za,__tla as Ba}from"../chunks/BtY6RuN-.js";import{h as Ma}from"../chunks/CpOe2gu7.js";import{g as Z}from"../chunks/BhqQrrNl.js";import{g as aa}from"../chunks/Bm62hVbu.js";import"../chunks/Buhwy7Lv.js";import{G as Fa}from"../chunks/BdBGwiZO.js";import{L as Ja}from"../chunks/Cqvbb-H9.js";import{g as Ka}from"../chunks/Bhxzz1gg.js";import{u as Qa}from"../chunks/rUUE80t4.js";import{A as ea}from"../chunks/CFS9S8Yy.js";let oa,Wa=Promise.all([(()=>{try{return Sa}catch{}})(),(()=>{try{return Aa}catch{}})(),(()=>{try{return Ba}catch{}})()]).then(async()=>{var sa=u('<div class="flex w-full justify-center items-center mt-10 mb-10 animate-pulse space-y-4"><div class="bg-black/30 w-full flex flex-col p-2.5 rounded-full"></div></div> <div class="mb-14"><!></div> <!>',1);function ra(T){var x=sa(),_=f(k(x),2),$=t(_);Fa($),i(_);var R=f(_,2);Ja(R,{}),p(T,x)}var ta=u('<div class="w-full flex justify-center"><!></div>'),ia=u('<div class="flex-[0_0_100%] min-w-0 py-0 sm:py-3"><!></div>'),na=u('<div class="flex w-full overflow-x-hidden text-center"><!></div>'),la=u('<div class="w-full overflow-x-hidden mt-5 last:mb-20 md:last:mb-10 md:mb-10"><!></div>'),ma=u("<!> <!>",1),pa=u('<div class="flex justify-center w-full px-4 sm:px-6 md:px-8 lg:px-10"><div class="w-full max-w-screen-lg space-y-6"><div class="w-full mb-0 text-center"><h2 class="text-white font-medium text-3xl mb-2"> </h2> <p class="text-white font-normal text-lg"> </p></div> <!> <!></div></div>');oa=function(T,x){ba(x,!1);const[_,$]=Ca(),R=()=>G(Qa,"$userStore",_),A=()=>G(qa,"$competitionStore",_),ca=()=>G(Oa,"$t",_);let v=c([]),y=c({lessons_completed:0,total_lessons:0}),D=c([]),H=c([]),V=c([]),Y=c([]),j=c(""),w=c(!0);$a(async()=>{var r;n(w,!0);const a=await La(),o=await Pa();n(v,(a==null?void 0:a.data)||[]),o!=null&&o.data&&((l=>(n(y,l.user_data),n(D,l.results),n(H,l.their_turn),n(V,l.your_turn),n(Y,l.invitations)))(o.data),Da.set({total_coins_earned:Ma((r=e(y))==null?void 0:r.points,2)}),e(v).length==0?n(j,await Ua("no_games")):n(j,e(v)[0].skill)),n(w,!1)});async function _a(a,o){var r;console.log("ActionCallback",a,o),o==="your_turn"&&(await Ha(a)).error_code===0&&(Z.set({link:a==null?void 0:a.link,opponent:{name:a==null?void 0:a.opponent_name,profile_picture:a==null?void 0:a.opponent_profile_picture,user_id:a==null?void 0:a.opponent_id,username:a==null?void 0:a.opponent_username},isSinglePlayer:1,matchData:{base_points:a==null?void 0:a.base_points,match_id:a==null?void 0:a.match_id,summary_id:a==null?void 0:a.summary_id,content_id:a==null?void 0:a.content_id},subjectData:{summary_id:a==null?void 0:a.summary_id,match_id:a==null?void 0:a.match_id,content_id:a==null?void 0:a.content_id}}),Va(),Ka("/challenge/vsscreen")),(o==="results"||o==="their_turn")&&(Ya({playerName:(r=R())==null?void 0:r.name,accuracy:ea(a==null?void 0:a.my_total_correct,a==null?void 0:a.my_total_questions,a==null?void 0:a.my_total_questions),timeTaken:a==null?void 0:a.my_time_spent,avatar:a==null?void 0:a.profile_picture,score:a==null?void 0:a.my_score,points:a==null?void 0:a.my_points}),za({playerName:a==null?void 0:a.opponent_name,score:a==null?void 0:a.opponent_score,accuracy:o==="results"?ea(a==null?void 0:a.opponent_total_correct,a==null?void 0:a.opponent_total_questions,a==null?void 0:a.opponent_total_questions):null,timeTaken:a==null?void 0:a.opponent_time_spent,avatar:a==null?void 0:a.opponent_profile_picture,opponent_id:a==null?void 0:a.opponent_id,points:a==null?void 0:a.opponent_points}),aa("/challenge/result"))}function ua(a){Z.set({...a}),aa("/challenge")}Ta();var O=pa();Na(a=>{J(o=>Ia.title=o,[()=>A().name||ca()("competition")],I)});var z=t(O),U=t(z),q=t(U),da=t(q,!0);i(q);var B=f(q,2),fa=t(B,!0);i(B),i(U);var M=f(U,2);{var va=a=>{var o=ta(),r=t(o);const l=I(()=>{var s;return(s=e(y))==null?void 0:s.lessons_completed}),L=I(()=>{var s;return(s=e(y))==null?void 0:s.total_lessons});Ea(r,{get completed(){return e(l)},get total(){return e(L)},className:"h-5 mt-3"}),i(o),p(a,o)};N(M,a=>{var o;(o=e(y))!=null&&o.total_lessons&&a(va)})}var ya=f(M,2);{var ga=a=>{ra(a)},ha=a=>{var o=ma(),r=k(o);{var l=s=>{var m=na(),b=t(m);ja(b,{children:(P,F)=>{var d=X(),g=k(d);Q(g,1,()=>e(v),W,(S,h)=>{var E=ia(),xa=t(E);const wa=I(()=>`${e(h).sort_order-1}/${e(h).total_lessons}`);Ra(xa,{get data(){return e(h)},get title(){return e(h).topic},get completion(){return e(wa)},onClick:()=>{ua(e(h))}}),i(E),p(S,E)}),p(P,d)},$$slots:{default:!0}}),i(m),p(s,m)};N(r,s=>{e(v).length&&s(l)})}var L=f(r,2);Q(L,1,()=>[{title:"invitations",data:e(Y),type:"invitations",icon:C.TURN_INVITE_ICON},{title:"your_turn",data:e(V),type:"your_turn",icon:C.TURN_YOUR_ICON},{title:"their_turn",data:e(H),type:"their_turn",icon:C.TURN_THEIR_ICON},{title:"results",data:e(D),type:"results",icon:C.RESULT_ICON}],W,(s,m)=>{var b=X(),P=k(b);{var F=d=>{var g=la(),S=t(g);Ga(S,{get listings(){return e(m).data},get title(){return e(m).title},get type(){return e(m).type},get icon(){return e(m).icon},get isLoading(){return e(w)},onItemClick:_a}),i(g),p(d,g)};N(P,d=>{e(m).data.length&&d(F)})}p(s,b)}),p(a,o)};N(ya,a=>{e(w)?a(ga):a(ha,!1)})}i(z),i(O),J(()=>{K(da,A().name),K(fa,e(j))}),p(T,O),ka(),$()}});export{Wa as __tla,oa as component};
