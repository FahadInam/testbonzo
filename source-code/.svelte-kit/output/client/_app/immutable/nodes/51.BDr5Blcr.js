import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{p as ae,c as r,g as e,s as g,r as s,t as C,a as se,l as J,b as $,m as B,F as ie,d as me,f as le,e as R}from"../chunks/BWmI7Kwv.js";import{s as v}from"../chunks/CpvBVgdC.js";import{i as E,s as ue,a as ce}from"../chunks/DJyY-Ao_.js";import{t as h,a as p,c as fe,e as be}from"../chunks/cR8EBM7j.js";import{e as K}from"../chunks/Cio8JTVh.js";import{t as Pe,s as de}from"../chunks/CQjx5DEQ.js";import{i as re}from"../chunks/CvLKQSYC.js";import{c as Ae,o as Fe}from"../chunks/DjNUT-oc.js";import{e as ve,i as Me}from"../chunks/DPui9idN.js";import{s as j}from"../chunks/Dui37nOO.js";import{p as Y}from"../chunks/Dtj4eyj4.js";import{S as Je}from"../chunks/GHjBkfal.js";import{C as Re,D as xe,k as Ye,t as ge,l as qe,m as Z,n as Ke,o as We,G as Ve,q as He,a as Qe,__tla as Xe}from"../chunks/Ke5tWbsT.js";import{u as Ze,t as et}from"../chunks/Bvbqq-zN.js";import{c as tt}from"../chunks/CR2liGHp.js";import{p as at}from"../chunks/Cj1nadwp.js";import{g as st}from"../chunks/BoEBYeq-.js";import{a as W}from"../chunks/CJxW89IG.js";import{i as pe}from"../chunks/BwH_vxp2.js";import{I as ye}from"../chunks/_Vcui5w2.js";import{F as rt}from"../chunks/B08xAkVk.js";let _e,ot=Promise.all([(()=>{try{return Xe}catch{}})()]).then(async()=>{var he=h('<img class="w-11 mb-2">'),we=h('<button type="button" class="border min-h-[169px] p-6 rounded-xl cursor-pointer transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 flex flex-col justify-between h-full" tabindex="0"><!> <p class="text-lg font-medium mt-8"> </p></button>'),$e=h('<div class="grid grid-cols-1 lg:grid-cols-3 gap-4  "></div>');function ke(q,y){ae(y,!1);let w=Y(y,"paymentOptions",24,()=>[]),L=Y(y,"selectedOption",12,"");const l=Ae();function S(i){L(i),l("select",{selected:i})}function O(i,f){(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),S(f))}re();var c=$e();ve(c,5,w,Me,(i,f)=>{var o=we(),D=r(o);{var N=b=>{var I=he();C(()=>{j(I,"src",e(f).icon),j(I,"alt",e(f).label)}),p(b,I)};E(D,b=>{e(f).icon&&b(N)})}var P=g(D,2),T=r(P,!0);s(P),s(o),C(()=>{j(o,"aria-pressed",L()===e(f).value),Pe(o,"shadow-lg",L()===e(f).value),v(T,e(f).label)}),K("click",o,()=>S(e(f).value)),K("keydown",o,b=>O(b,e(f).value)),p(i,o)}),s(c),p(q,c),se()}var Ce=h('<div class=" bundle-discount absolute top-0 w-full text-center py-1 font-bold text-white text-base z-10"> </div>'),Se=h('<span class="games_badge absolute text-xs w-fit-content top-1 right-8 rounded-[30px] p-[2px_8px] font-medium transform -rotate-7"> </span>'),Ie=h('<div tabindex="0" role="button"><div class="bundle-card-content p-0 relative"><!> <div><div class="bundle-shape-box relative mt-[10px] mb-0"><div class="bundle-icon absolute w-[60px] left-[-22px] z-10 top-[-5px]"><img class="w-full"></div> <div class="bundle-shape-container w-[90%] h-[50px] relative rounded-lg svelte-wr7ntx"><span class="bundle-title text-white text-[22px] font-medium flex justify-start items-center h-full pl-[60px]"> </span></div> <span class="bundle-fix-title font-semibold text-lg mt-[2px] block text-left pl-[60px]"> </span></div> <div class="mt-2 relative"><!> <h4 class="bundle-games-count text-[47px] font-semibold my-1 mx-0 relative"><span class="text-shadow-custom"> </span> <span class="games-count-title text-[28px] mx-2 text-black"> </span></h4></div> <div class="bundle-pricing flex justify-center items-center font-semibold text-[22px] uppercase leading-[90px]"><span class="currency-title text-black">KES</span> <span class="bundle-amount text-[76px] text-[#ffff00] px-5 text-shadow-custom"> </span></div> <div class="pb-4"><p class="bundle-description text-xs font-normal leading-normal py-0 px-5 w-[160px] mx-auto text-black"> </p></div></div></div></div>');function Ee(q,y){ae(y,!1);const w=B(),L=B(),l=B(),S=B(),O=B();let c=Y(y,"bundle",24,()=>[]),i=Y(y,"isSelected",8,!1),f=Y(y,"onClick",8,()=>{});J(()=>ie(c()),()=>{var n;$(w,((n=c().title)==null?void 0:n.toLowerCase())||"daily")}),J(()=>e(w),()=>{$(L,ye[`${e(w).toUpperCase()}_BUNDLE_IMAGE`]||ye.DAILY_BUNDLE_IMAGE)}),J(()=>(e(w),xe),()=>{$(l,Re[e(w)]||xe)}),J(()=>(e(S),ie(c())),()=>{var n;(u=>$(S,u[0]))(((n=c().description)==null?void 0:n.split(" "))||["0"])}),J(()=>e(w),()=>{$(O,Ye[e(w)]||10)}),me(),re();var o=Ie(),D=r(o),N=r(D);{var P=n=>{var u=Ce(),ne=r(u,!0);s(u),C(()=>{j(u,"style",`background-color: ${e(l).discountBgColor||"#0086FF"};`),v(ne,e(l).discountText)}),p(n,u)};E(N,n=>{e(l).discountText&&n(P)})}var T=g(N,2),b=r(T),I=r(b),V=r(I);s(I);var A=g(I,2),m=r(A),F=r(m,!0);s(m),s(A);var U=g(A,2),z=r(U,!0);s(U),s(b);var G=g(b,2),H=r(G);{var Q=n=>{var u=Se(),ne=r(u,!0);s(u),C(()=>{j(u,"style",`color: ${e(l).bgColor??""}; background-color: ${e(l).perdayTextBg??""}`),v(ne,e(l).perdayText)}),p(n,u)};E(H,n=>{e(l).perdayText&&n(Q)})}var ee=g(H,2),X=r(ee),oe=r(X,!0);s(X);var te=g(X,2),t=r(te,!0);s(te),s(ee),s(G);var a=g(G,2),d=g(r(a),2),k=r(d,!0);s(d),s(a);var M=g(a,2),x=r(M),_=r(x);s(x),s(M),s(T),s(D),s(o),C(()=>{de(o,`bundle-card cursor-pointer border-2 border-black rounded-2xl bg-white transition-all duration-300 ease-in-out text-center m-1 transform scale-100 min-w-[234px] ${(i()?"selected-card border-[#02bbfe] bg-[#f0f8ff]":"")??""}`),de(T,`bundle-card-inner min-h-[320px] rounded-[14px] mb-[11px] p-[15px] pb-0 ${(i()?"shadow-[0px_12px_0px_-1px_#02bbfe]":"bundle-card-shadow shadow-[0px_12px_0px_-1px_#d5dbea]")??""}`),j(V,"src",e(L)),j(V,"alt",`${c().title??""} Bundle Icon`),j(A,"style",`background-color: ${e(l).bgColor??""};`),v(F,c().title),j(U,"style",`color: ${e(l).textColor??""}`),v(z,ge.BUNDLE),j(X,"style",`color: ${e(l).gameNumberColor??""};`),v(oe,e(S)),v(t,ge.GAMES),v(k,c().amount),v(_,`Up for ${e(O)??""} Games For Form 2`)}),K("click",o,function(...n){var u;(u=f())==null||u.apply(this,n)}),K("keydown",o,n=>n.key==="Enter"&&f()()),K("mouseenter",o,n=>n.currentTarget.classList.add("border-[#02bbfe]","bg-[#f0f8ff]","scale-[1.02]","z-[1]","shadow-lg")),K("mouseleave",o,n=>!i()&&n.currentTarget.classList.remove("border-[#02bbfe]","bg-[#f0f8ff]","scale-[1.02]","z-[1]","shadow-lg")),p(q,o),se()}var Ue=h('<div class="flex justify-center"><!></div>');function Be(q,y){ae(y,!1);const[w,L]=ue(),l=()=>ce(Ze,"$userStore",w),S=()=>ce(at,"$paymentStore",w),O=B(),c=B();let i=B(null),f=Y(y,"selectedOption",12,""),o=Y(y,"paymentInitiated",8,!1);const D=window.location.origin;let N=Y(y,"bundles",24,()=>[]);function P(m){$(i,m),f(m)}const T=async m=>{var U,z;const F={amount:e(i).amount,subscription_guid:e(i).subscription_guid,vendor_uid:e(i).payment_vendor_guid,phone_number:l().phone_number,grade:S().current_grade.toString(),currency:"KES",duration_in_days:e(i).duration_in_days,competition_id:(U=S())==null?void 0:U.competition_id,timezone:(z=l())==null?void 0:z.timezone,redirect_url:`${D}/payment/status`,back_url:`${D}/payment`,email:m.email};pe()?await Ke(F):await We(F)};J(()=>ie(N()),()=>{$(O,qe(N()))}),J(()=>Z,()=>{$(c,pe()?Z.fields.filter(m=>m.name!=="email"):Z.fields)}),J(()=>Z,()=>{console.log(Z,"isSafaricomUser")}),me(),re();var b=Ue(),I=r(b);{var V=m=>{var F=fe(),U=le(F);ve(U,1,()=>e(O),z=>z.id,(z,G)=>{const H=R(()=>{var Q;return((Q=e(i))==null?void 0:Q.id)===e(G).id});Ee(z,{get bundle(){return e(G)},get isSelected(){return e(H)},onClick:()=>P(e(G))})}),p(m,F)},A=m=>{rt(m,{enableTurnstile:!1,turnstileSiteKey:"",handleSubmit:T,get fields(){return e(c)},buttons:[{type:"submit",label:"Continue",customClass:"w-[500px]"}]})};E(I,m=>{!o()&&e(O).length?m(V):m(A,!1)})}s(b),p(q,b),se(),L()}var Le=h('<h1 class="sm:text-3xl text-2xl font-bold mb-3 sm:mb-6 mt-6 sm:mt-12"> </h1>'),Oe=h("<p><!></p>"),De=h('<p class="text-lg text-center mt-4 mb-8"> </p>'),Te=h('<p class="text-lg text-center mt-4 mb-8"> </p>'),ze=h('<p class="text-center text-sm text-gray-600 mb-6"> </p>'),Ge=h('<p class="text-gray-600 text-sm mt-4"> </p>'),je=h('<div class="flex justify-center items-center min-h-18 sm:mt-18 lg:mt-8"><button class="bg-blue-500 text-white py-2 px-6 rounded-lg font-semibold text-lg disabled:bg-gray-600/25 w-[32rem]"> </button></div>'),Ne=h('<!> <div class="text-left"><!> <!> <!> <!> <!></div> <!>',1);_e=function(q,y){ae(y,!1);const[w,L]=ue(),l=()=>ce(et,"$t",w);let S="",O=1,c=B([]),i=B(!1);const f=[{title:window.innerWidth<640?"Payment":"Choose Payment"},{title:"Confirm"}];let o=B("");Fe(async()=>{$(c,await Ve()),console.log("Subscription Details:",e(c))});function D(t){$(o,t.detail.selected),S=e(o)}function N(){if(W)$(i,!0);else if(e(o)==="Bank")st("/payment/bank");else{const t=Qe(e(c)),a=window.location.href;let d=JSON.stringify(t);const k=`${tt}pay?type=${encodeURIComponent(S)}&redirectUrl=${encodeURIComponent(a)}&userDetails=${encodeURIComponent(d)}`;window.location.href=k}}re();var P=Ne(),T=le(P);Je(T,{steps:f,activeStep:O});var b=g(T,2),I=r(b);{var V=t=>{var a=Le(),d=r(a,!0);s(a),C(k=>v(d,k),[()=>l()("payment")],R),p(t,a)};E(I,t=>{W||t(V)})}var A=g(I,2);{var m=t=>{var a=Oe();de(a,`sm:text-lg text-gray-600  ${W?"text-center mt-3 mb-3":"mb-8"}`);var d=r(a);{var k=x=>{var _=be();C(n=>v(_,n),[()=>l()("shupavu_payment_method")],R),p(x,_)},M=x=>{var _=be();C(n=>v(_,n),[()=>l()("preferred_payment_method")],R),p(x,_)};E(d,x=>{W?x(k):x(M,!1)})}s(a),p(t,a)},F=t=>{var a=fe(),d=le(a);{var k=x=>{var _=De(),n=r(_,!0);s(_),C(u=>v(n,u),[()=>l()("confirm_timezone")],R),p(x,_)},M=x=>{var _=Te(),n=r(_,!0);s(_),C(u=>v(n,u),[()=>l()("enter_email")],R),p(x,_)};E(d,x=>{pe()?x(k):x(M,!1)},!0)}p(t,a)};E(A,t=>{e(i)?t(F,!1):t(m)})}var U=g(A,2);{var z=t=>{var a=ze(),d=r(a,!0);s(a),C(k=>v(d,k),[()=>l()("total_games")],R),p(t,a)};E(U,t=>{W&&!e(i)&&t(z)})}var G=g(U,2);{var H=t=>{Be(t,{get bundles(){return e(c)},get selectedOption(){return e(o)},set selectedOption(a){$(o,a)},get paymentInitiated(){return e(i)},set paymentInitiated(a){$(i,a)},$$legacy:!0})},Q=t=>{ke(t,{paymentOptions:He,get selectedOption(){return e(o)},set selectedOption(a){$(o,a)},$$events:{select:D},$$legacy:!0})};E(G,t=>{W&&e(c).length?t(H):t(Q,!1)})}var ee=g(G,2);{var X=t=>{var a=Ge(),d=r(a);s(a),C(()=>v(d,`You selected ${e(o)??""} as your payment method.`)),p(t,a)};E(ee,t=>{e(o)&&!e(i)&&!W&&t(X)})}s(b);var oe=g(b,2);{var te=t=>{var a=je(),d=r(a),k=r(d,!0);s(d),s(a),C(M=>{d.disabled=!e(o),v(k,M)},[()=>l()("continue")],R),K("click",d,N),p(t,a)};E(oe,t=>{e(i)||t(te)})}p(q,P),se(),L()}});export{ot as __tla,_e as component};
