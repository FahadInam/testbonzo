import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{p as ae,c as o,g as e,s as g,r as s,t as C,a as se,l as K,b as $,m as T,F as le,e as me,f as ie,d as R}from"../chunks/UMRfY9Ko.js";import{s as x}from"../chunks/Bq4tIOc4.js";import{i as U,s as ue,a as ce}from"../chunks/C8EeH_y7.js";import{t as h,a as p,c as fe,e as ve}from"../chunks/D7kVQxiR.js";import{e as V}from"../chunks/D7M_RLsn.js";import{t as je,s as de}from"../chunks/CC0ELNUk.js";import{i as oe}from"../chunks/DwRdgw7B.js";import{c as Ae,o as Me}from"../chunks/D_1OQ_gr.js";import{e as xe,i as Pe}from"../chunks/DiuJufaP.js";import{s as F}from"../chunks/CBgq6MFg.js";import{p as q}from"../chunks/CSfE_DI5.js";import{S as Ke}from"../chunks/BTDGatFf.js";import{C as Re,D as be,k as qe,t as ge,l as Je,m as X,n as pe,o as Ve,q as Ye,G as Ze,r as He,a as Qe,__tla as We}from"../chunks/DFlH5I6x.js";import{u as Xe}from"../chunks/rUUE80t4.js";import{d as et}from"../chunks/KMGk3Nas.js";import{t as tt}from"../chunks/KgIHh09F.js";import{p as at}from"../chunks/DMPqjojU.js";import{g as st}from"../chunks/Bhxzz1gg.js";import{a as Y}from"../chunks/DAxMji9q.js";import{I as ye}from"../chunks/CUEp9C6H.js";import{F as ot}from"../chunks/CRpTkHns.js";let _e,rt=Promise.all([(()=>{try{return We}catch{}})()]).then(async()=>{var he=h('<img class="w-11 mb-2">'),we=h('<button type="button" class="border min-h-[169px] p-6 rounded-xl cursor-pointer transition-all duration-200 text-left focus:outline-none focus:ring-2 focus:ring-blue-500 flex flex-col justify-between h-full" tabindex="0"><!> <p class="text-lg font-medium mt-8"> </p></button>'),$e=h('<div class="grid grid-cols-1 lg:grid-cols-3 gap-4  "></div>');function ke(J,y){ae(y,!1);let w=q(y,"paymentOptions",24,()=>[]),B=q(y,"selectedOption",12,"");const i=Ae();function S(l){B(l),i("select",{selected:l})}function O(l,f){(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),S(f))}oe();var c=$e();xe(c,5,w,Pe,(l,f)=>{var r=we(),D=o(r);{var L=v=>{var I=he();C(()=>{F(I,"src",e(f).icon),F(I,"alt",e(f).label)}),p(v,I)};U(D,v=>{e(f).icon&&v(L)})}var j=g(D,2),z=o(j,!0);s(j),s(r),C(()=>{F(r,"aria-pressed",B()===e(f).value),je(r,"shadow-lg",B()===e(f).value),x(z,e(f).label)}),V("click",r,()=>S(e(f).value)),V("keydown",r,v=>O(v,e(f).value)),p(l,r)}),s(c),p(J,c),se()}var Ce=h('<div class=" bundle-discount absolute top-0 w-full text-center py-1 font-bold text-white text-base z-10"> </div>'),Se=h('<span class="games_badge absolute text-xs w-fit-content top-1 right-8 rounded-[30px] p-[2px_8px] font-medium transform -rotate-7"> </span>'),Ie=h('<div tabindex="0" role="button"><div class="bundle-card-content p-0 relative"><!> <div><div class="bundle-shape-box relative mt-[10px] mb-0"><div class="bundle-icon absolute w-[60px] left-[-22px] z-10 top-[-5px]"><img class="w-full"></div> <div class="bundle-shape-container w-[90%] h-[50px] relative rounded-lg svelte-wr7ntx"><span class="bundle-title text-white text-[22px] font-medium flex justify-start items-center h-full pl-[60px]"> </span></div> <span class="bundle-fix-title font-semibold text-lg mt-[2px] block text-left pl-[60px]"> </span></div> <div class="mt-2 relative"><!> <h4 class="bundle-games-count text-[47px] font-semibold my-1 mx-0 relative"><span class="text-shadow-custom"> </span> <span class="games-count-title text-[28px] mx-2 text-black"> </span></h4></div> <div class="bundle-pricing flex justify-center items-center font-semibold text-[22px] uppercase leading-[90px]"><span class="currency-title text-black">KES</span> <span class="bundle-amount text-[76px] text-[#ffff00] px-5 text-shadow-custom"> </span></div> <div class="pb-4"><p class="bundle-description text-xs font-normal leading-normal py-0 px-5 w-[160px] mx-auto text-black"> </p></div></div></div></div>');function Ue(J,y){ae(y,!1);const w=T(),B=T(),i=T(),S=T(),O=T();let c=q(y,"bundle",24,()=>[]),l=q(y,"isSelected",8,!1),f=q(y,"onClick",8,()=>{});K(()=>le(c()),()=>{var n;$(w,((n=c().title)==null?void 0:n.toLowerCase())||"daily")}),K(()=>e(w),()=>{$(B,ye[`${e(w).toUpperCase()}_BUNDLE_IMAGE`]||ye.DAILY_BUNDLE_IMAGE)}),K(()=>(e(w),be),()=>{$(i,Re[e(w)]||be)}),K(()=>(e(S),le(c())),()=>{var n;(u=>$(S,u[0]))(((n=c().description)==null?void 0:n.split(" "))||["0"])}),K(()=>e(w),()=>{$(O,qe[e(w)]||10)}),me(),oe();var r=Ie(),D=o(r),L=o(D);{var j=n=>{var u=Ce(),ne=o(u,!0);s(u),C(()=>{F(u,"style",`background-color: ${e(i).discountBgColor||"#0086FF"};`),x(ne,e(i).discountText)}),p(n,u)};U(L,n=>{e(i).discountText&&n(j)})}var z=g(L,2),v=o(z),I=o(v),Z=o(I);s(I);var A=g(I,2),m=o(A),M=o(m,!0);s(m),s(A);var E=g(A,2),G=o(E,!0);s(E),s(v);var N=g(v,2),H=o(N);{var Q=n=>{var u=Se(),ne=o(u,!0);s(u),C(()=>{F(u,"style",`color: ${e(i).bgColor??""}; background-color: ${e(i).perdayTextBg??""}`),x(ne,e(i).perdayText)}),p(n,u)};U(H,n=>{e(i).perdayText&&n(Q)})}var ee=g(H,2),W=o(ee),re=o(W,!0);s(W);var te=g(W,2),t=o(te,!0);s(te),s(ee),s(N);var a=g(N,2),d=g(o(a),2),k=o(d,!0);s(d),s(a);var P=g(a,2),b=o(P),_=o(b);s(b),s(P),s(z),s(D),s(r),C(()=>{de(r,`bundle-card cursor-pointer border-2 border-black rounded-2xl bg-white transition-all duration-300 ease-in-out text-center m-1 transform scale-100 min-w-[234px] ${(l()?"selected-card border-[#02bbfe] bg-[#f0f8ff]":"")??""}`),de(z,`bundle-card-inner min-h-[320px] rounded-[14px] mb-[11px] p-[15px] pb-0 ${(l()?"shadow-[0px_12px_0px_-1px_#02bbfe]":"bundle-card-shadow shadow-[0px_12px_0px_-1px_#d5dbea]")??""}`),F(Z,"src",e(B)),F(Z,"alt",`${c().title??""} Bundle Icon`),F(A,"style",`background-color: ${e(i).bgColor??""};`),x(M,c().title),F(E,"style",`color: ${e(i).textColor??""}`),x(G,ge.BUNDLE),F(W,"style",`color: ${e(i).gameNumberColor??""};`),x(re,e(S)),x(t,ge.GAMES),x(k,c().amount),x(_,`Up for ${e(O)??""} Games For Form 2`)}),V("click",r,function(...n){var u;(u=f())==null||u.apply(this,n)}),V("keydown",r,n=>n.key==="Enter"&&f()()),V("mouseenter",r,n=>n.currentTarget.classList.add("border-[#02bbfe]","bg-[#f0f8ff]","scale-[1.02]","z-[1]","shadow-lg")),V("mouseleave",r,n=>!l()&&n.currentTarget.classList.remove("border-[#02bbfe]","bg-[#f0f8ff]","scale-[1.02]","z-[1]","shadow-lg")),p(J,r),se()}var Ee=h('<div class="flex justify-center"><!></div>');function Te(J,y){ae(y,!1);const[w,B]=ue(),i=()=>ce(Xe,"$userStore",w),S=()=>ce(at,"$paymentStore",w),O=T(),c=T();let l=T(null),f=q(y,"selectedOption",12,""),r=q(y,"paymentInitiated",8,!1);const D=window.location.origin;let L=q(y,"bundles",24,()=>[]);function j(m){$(l,m),f(m)}const z=async m=>{var E,G;const M={amount:e(l).amount,subscription_guid:e(l).subscription_guid,vendor_uid:e(l).payment_vendor_guid,phone_number:i().phone_number,grade:S().current_grade.toString(),currency:"KES",duration_in_days:e(l).duration_in_days,competition_id:(E=S())==null?void 0:E.competition_id,timezone:(G=i())==null?void 0:G.timezone,redirect_url:`${D}/payment/status`,back_url:`${D}/payment`,email:m.email};pe?await Ve(M):await Ye(M)};K(()=>le(L()),()=>{$(O,Je(L()))}),K(()=>X,()=>{$(c,pe?X.fields.filter(m=>m.name!=="email"):X.fields)}),K(()=>X,()=>{console.log(X,"isSafaricomUser")}),me(),oe();var v=Ee(),I=o(v);{var Z=m=>{var M=fe(),E=ie(M);xe(E,1,()=>e(O),G=>G.id,(G,N)=>{const H=R(()=>{var Q;return((Q=e(l))==null?void 0:Q.id)===e(N).id});Ue(G,{get bundle(){return e(N)},get isSelected(){return e(H)},onClick:()=>j(e(N))})}),p(m,M)},A=m=>{ot(m,{enableTurnstile:!1,turnstileSiteKey:"",handleSubmit:z,get fields(){return e(c)},buttons:[{type:"submit",label:"Continue",customClass:"w-[500px]"}]})};U(I,m=>{!r()&&e(O).length?m(Z):m(A,!1)})}s(v),p(J,v),se(),B()}var Be=h('<h1 class="text-3xl font-bold mb-6 mt-12"> </h1>'),Oe=h("<p><!></p>"),De=h('<p class="text-lg text-center mt-4 mb-8"> </p>'),ze=h('<p class="text-lg text-center mt-4 mb-8"> </p>'),Ge=h('<p class="text-center text-sm text-gray-600 mb-6"> </p>'),Ne=h('<p class="text-gray-600 text-sm mt-4"> </p>'),Fe=h('<div class="flex justify-center items-center min-h-18 sm:mt-18 lg:mt-8"><button class="bg-blue-500 text-white py-2 px-6 rounded-lg font-semibold text-lg disabled:bg-gray-600/25 w-[32rem]"> </button></div>'),Le=h('<!> <div class="text-left"><!> <!> <!> <!> <!></div> <!>',1);_e=function(J,y){ae(y,!1);const[w,B]=ue(),i=()=>ce(tt,"$t",w);let S="",O=1,c=T([]),l=T(!1);const f=[{title:"Choose Payment"},{title:"Confirm"}];let r=T("");Me(async()=>{$(c,await Ze()),console.log("Subscription Details:",e(c))});function D(t){$(r,t.detail.selected),S=e(r)}function L(){if(Y)$(l,!0);else if(e(r)==="Bank")st("/payment/bank");else{const t=Qe(e(c)),a=window.location.href;let d=JSON.stringify(t);const k=`${et}pay?type=${encodeURIComponent(S)}&redirectUrl=${encodeURIComponent(a)}&userDetails=${encodeURIComponent(d)}`;window.location.href=k}}oe();var j=Le(),z=ie(j);Ke(z,{steps:f,activeStep:O});var v=g(z,2),I=o(v);{var Z=t=>{var a=Be(),d=o(a,!0);s(a),C(k=>x(d,k),[()=>i()("payment")],R),p(t,a)};U(I,t=>{Y||t(Z)})}var A=g(I,2);{var m=t=>{var a=Oe();de(a,`text-lg text-gray-600  ${Y?"text-center mt-3 mb-3":"mb-8"}`);var d=o(a);{var k=b=>{var _=ve();C(n=>x(_,n),[()=>i()("shupavu_payment_method")],R),p(b,_)},P=b=>{var _=ve();C(n=>x(_,n),[()=>i()("preferred_payment_method")],R),p(b,_)};U(d,b=>{Y?b(k):b(P,!1)})}s(a),p(t,a)},M=t=>{var a=fe(),d=ie(a);{var k=b=>{var _=De(),n=o(_,!0);s(_),C(u=>x(n,u),[()=>i()("confirm_timezone")],R),p(b,_)},P=b=>{var _=ze(),n=o(_,!0);s(_),C(u=>x(n,u),[()=>i()("enter_email")],R),p(b,_)};U(d,b=>{pe?b(k):b(P,!1)})}p(t,a)};U(A,t=>{e(l)?t(M,!1):t(m)})}var E=g(A,2);{var G=t=>{var a=Ge(),d=o(a,!0);s(a),C(k=>x(d,k),[()=>i()("total_games")],R),p(t,a)};U(E,t=>{Y&&!e(l)&&t(G)})}var N=g(E,2);{var H=t=>{Te(t,{get bundles(){return e(c)},get selectedOption(){return e(r)},set selectedOption(a){$(r,a)},get paymentInitiated(){return e(l)},set paymentInitiated(a){$(l,a)},$$legacy:!0})},Q=t=>{ke(t,{paymentOptions:He,get selectedOption(){return e(r)},set selectedOption(a){$(r,a)},$$events:{select:D},$$legacy:!0})};U(N,t=>{Y&&e(c).length?t(H):t(Q,!1)})}var ee=g(N,2);{var W=t=>{var a=Ne(),d=o(a);s(a),C(()=>x(d,`You selected ${e(r)??""} as your payment method.`)),p(t,a)};U(ee,t=>{e(r)&&!e(l)&&!Y&&t(W)})}s(v);var re=g(v,2);{var te=t=>{var a=Fe(),d=o(a),k=o(d,!0);s(d),s(a),C(P=>{d.disabled=!e(r),x(k,P)},[()=>i()("continue")],R),V("click",d,L),p(t,a)};U(re,t=>{e(l)||t(te)})}p(J,j),se(),B()}});export{rt as __tla,_e as component};
