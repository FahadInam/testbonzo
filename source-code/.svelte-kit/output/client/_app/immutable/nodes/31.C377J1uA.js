import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{p as te,b as r,g as s,l as se,d as ie,f as x,a as oe,m as n,t as M,e as l,ad as ae,s as C,c as P,r as L}from"../chunks/BWmI7Kwv.js";import{h as re,s as me}from"../chunks/CpvBVgdC.js";import{a as v,i as I,s as ne}from"../chunks/DJyY-Ao_.js";import{t as N,a as V,c as le}from"../chunks/cR8EBM7j.js";import{i as ce}from"../chunks/CvLKQSYC.js";import{o as ue,a as pe}from"../chunks/DjNUT-oc.js";import{u as R,t as _e}from"../chunks/Bvbqq-zN.js";import{a as Y,r as de,c as j,k as fe}from"../chunks/DWJ43-ZD.js";import{__tla as ge}from"../chunks/Djyhf4cp.js";import"../chunks/ClXJh1T-.js";import{g as be}from"../chunks/CkIfqAOp.js";import{m as he,V as ve,r as Ve,S as ye,C as Se,__tla as we}from"../chunks/CY6V76w3.js";import{B as Be}from"../chunks/jZj24OFn.js";import{s as $e}from"../chunks/D6ovqnLS.js";import{g as A}from"../chunks/BoEBYeq-.js";import{s as ke,c as xe,a as Me}from"../chunks/CROUG2YM.js";import{b as Ce,c as Pe,__tla as Le}from"../chunks/Cf2TjtaF.js";import{s as Ie}from"../chunks/CJxW89IG.js";import{m as Ne}from"../chunks/CuKIkSf6.js";import{t as Re}from"../chunks/-67--UVX.js";let D,Ye=Promise.all([(()=>{try{return ge}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return Le}catch{}})()]).then(async()=>{var F=N('<p class="text-center text-white"> </p>'),G=N("<!> <div><!> <!></div>",1);D=function(H,J){var k;te(J,!1);const[c,K]=ne(),O=()=>v(Ie,"$systemSettingsStore",c),u=()=>v(R,"$userStore",c),m=()=>v(_e,"$t",c);let p=n([]),_=n([]),d=n(!0),f=n(!1);const T=(k=O())==null?void 0:k.is_voucher_allowed;let y=u().is_guest_mode;$e.set({visible:!1});async function g(){const e=await Ce();r(_,e.data.competitions);let i=s(_).map(b=>de(b,{banner_image:"image",competition_id:"id",name:"title"}));r(p,i),r(d,!1),Ve()}ue(async()=>{j.set({url:null,name:null,current_grade:null,competition_id:null,is_lesson_page_hide:null,is_games_page:null,is_premium:null}),Re.set({}),g(),be.update(e=>({...e,points:null}))}),ke("/"),xe(),Me("/competitions");const U=Y.subscribe(e=>{r(f,e.isVoucherModalVisible)}),X=R.subscribe(e=>{e.is_guest_mode!==y&&(y=e.is_guest_mode,s(d)||g())});he(["/"]),pe(()=>{U(),X()}),se(()=>u(),()=>{Y.set({visible:!0,backLabel:"",isLogoVisible:!0,isCoinVisible:!1,isBackButtonVisible:!!u().is_guest_mode,isVoucherButtonVisible:T,isVoucherModalVisible:!1,isNotificationVisible:!1,isShowPaymentBanner:!1,isShowRules:!1,isProfileVisible:!0})}),ie(),ce();var S=G();re(e=>{M(i=>ae.title=i,[()=>m()("competitions")],l)});var w=x(S);Be(w,{});var B=C(w,2),$=P(B);{var Z=e=>{ye(e,{})},q=e=>{var i=le(),b=x(i);{var W=o=>{Se(o,{get competitions(){return s(p)},onItemClick:a=>{const t=fe(a,s(_),"competition_id");j.set(t),Ne.update(h=>({...h,url:t.url,id:t.competition_id,current_grade:t.current_grade})),!t.enrolled&&t.rules?A("competitions/"+t.url+"/rules"):A("competitions/"+t.url+"/home")}})},ee=o=>{var a=F(),t=P(a,!0);L(a),M(h=>me(t,h),[()=>m()("no_competitions")],l),V(o,a)};I(b,o=>{s(p).length>0?o(W):o(ee,!1)},!0)}V(e,i)};I($,e=>{s(d)?e(Z):e(q,!1)})}var z=C($,2);const E=l(()=>m()("add_voucher_code")),Q=l(()=>m()("voucher_instruction"));ve(z,{onSuccess:g,onSubmit:Pe,get title(){return s(E)},get instructionText(){return s(Q)},get showModal(){return s(f)},set showModal(e){r(f,e)},$$legacy:!0}),L(B),V(H,S),oe(),K()}});export{Ye as __tla,D as component};
