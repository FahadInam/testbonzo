import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{c as t,r as e,s as v,t as J,f as te,p as ge,a as me,g as a,e as oe,n as aa,l as se,F as fe,b,m as G,d as Se}from"../chunks/BWmI7Kwv.js";import{t as o,a as i,c as ue}from"../chunks/cR8EBM7j.js";import{i as W,s as ra,a as ta}from"../chunks/DJyY-Ao_.js";import{e as N,i as E}from"../chunks/DPui9idN.js";import{i as pe}from"../chunks/CvLKQSYC.js";import{o as sa}from"../chunks/DjNUT-oc.js";import{I as je}from"../chunks/_Vcui5w2.js";import{w as la,a as ia,b as da}from"../chunks/DWJ43-ZD.js";import{s as R}from"../chunks/CpvBVgdC.js";import{s as xe}from"../chunks/Dui37nOO.js";import{p as L}from"../chunks/Dtj4eyj4.js";import{s as be}from"../chunks/CQjx5DEQ.js";import{A as oa}from"../chunks/DrO32kRC.js";import{P as va}from"../chunks/Br0AyJpI.js";import{S as Ae}from"../chunks/DBObbdNy.js";import{b as Oe,f as na,__tla as ca}from"../chunks/DS_dmsjO.js";import{m as ye,p as ga,__tla as ma}from"../chunks/Cf2TjtaF.js";import{s as fa}from"../chunks/CROUG2YM.js";import{a as ua}from"../chunks/BoEBYeq-.js";let Ce,Pe,pa=Promise.all([(()=>{try{return ca}catch{}})(),(()=>{try{return ma}catch{}})()]).then(async()=>{let we;we=!1,Pe=Object.freeze(Object.defineProperty({__proto__:null,prerender:we},Symbol.toStringTag,{value:"Module"}));var $e=o('<div class="w-full max-w-md bg-white rounded-2xl shadow-sm p-6 flex flex-col items-center"><div class="w-12 h-12 text-gray-600 mb-4"><img class="w-full h-full object-contain"></div> <div class="text-4xl font-semibold text-gray-700"> </div> <div class="text-lg text-gray-500 mt-1"> </div></div>');function De(B,g){let k=L(g,"number",8,0),V=L(g,"title",8,"Total Games"),s=L(g,"icon",8,"");var u=$e(),_=t(u),D=t(_);e(_);var y=v(_,2),S=t(y,!0);e(y);var m=v(y,2),d=t(m,!0);e(m),e(u),J(()=>{xe(D,"src",s()),xe(D,"alt",V()),R(S,k()??0),R(d,V())}),i(B,u)}var Ge=o('<div class="bg-gray-200 rounded-lg p-6 flex flex-col"><div class="flex items-center mb-4"><div class="w-10 h-10 rounded-full bg-gray-300 mr-3"></div> <div class="h-5 bg-gray-300 rounded w-1/2"></div></div> <div class="h-8 bg-gray-300 rounded w-1/3 mb-2"></div></div>'),Re=o('<div class="flex items-center justify-between py-3 border-b border-gray-300"><div class="flex items-center"><div class="w-8 h-8 rounded-full bg-gray-300 mr-3"></div> <div class="h-4 bg-gray-300 rounded w-24"></div></div> <div class="h-4 bg-gray-300 rounded w-12"></div></div>'),ke=o('<div class="bg-gray-200 rounded-lg p-6"><div class="h-6 bg-gray-300 rounded w-1/3 mb-6"></div> <!></div>'),Fe=o('<div class="flex flex-col"><div class="flex justify-between mb-2"><div class="h-4 bg-gray-300 rounded w-1/3"></div> <div class="h-4 bg-gray-300 rounded w-16"></div></div> <div class="h-4 bg-gray-300 rounded-full w-full"></div></div>'),Le=o('<div class="bg-gray-200 rounded-lg p-6"><div class="h-6 bg-gray-300 rounded w-1/4 mb-6"></div> <div class="space-y-4"></div></div>'),Ve=o('<div class="animate-pulse"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"></div> <div class="flex flex-col gap-8 my-8"></div></div>');function Ie(B,g){let k=L(g,"isLoading",8,!0);var V=ue(),s=te(V);{var u=_=>{var D=Ve(),y=t(D);N(y,4,()=>Array(3),E,(d,A)=>{var n=Ge();i(d,n)}),e(y);var S=v(y,2);N(S,4,()=>Array(2),E,(d,A)=>{var n=ke(),O=v(t(n),2);N(O,0,()=>Array(3),E,(p,C,f,h)=>{var P=Re();i(p,P)}),e(n),i(d,n)}),e(S);var m=v(S,2);N(m,4,()=>Array(2),E,(d,A)=>{var n=Le(),O=v(t(n),2);N(O,4,()=>Array(3),E,(p,C,f,h)=>{var P=Fe();i(p,P)}),e(O),e(n),i(d,n)}),e(m),e(D),i(_,D)};W(s,_=>{k()&&_(u)})}i(B,V)}var Ne=o('<div><div class="flex items-center gap-3"><div class="relative"><!></div> <span class="text-gray-500 font-medium truncate max-w-xs"> </span></div> <span class="text-gray-500 font-medium"> </span></div>'),Ee=o('<div class="space-y-3 bg-white rounded-b-[20px] px-4 py-3 flex-grow"></div>'),Be=o('<div class="bg-white rounded-b-[20px] p-6 flex flex-col items-center justify-center flex-grow"><img alt="No data" class="w-40 h-40 mb-4"> <p class="text-gray-500 text-center">No data to display</p></div>'),Te=o('<div class="bg-blue-900 rounded-[20px] pt-4 w-full shadow-lg flex flex-col"><h2 class="text-white font-bold text-xl mb-4 text-center"> </h2> <!></div>');function he(B,g){ge(g,!1);let k=L(g,"performers",24,()=>[]),V=L(g,"title",8,"Struggling Performers");pe();var s=Te(),u=t(s),_=t(u,!0);e(u);var D=v(u,2);{var y=m=>{var d=Ee();N(d,5,k,E,(A,n,O)=>{var p=Ne();be(p,`flex items-center justify-between p-2 rounded-[15px] ${(O%2===1?"bg-[#F5F6F7]":"bg-white")??""}`);var C=t(p),f=t(C),h=t(f);oa(h,{get t(){return a(n).profile_picture},s:30,u:30,ml:"auto",mr:"auto"}),e(f);var P=v(f,2),X=t(P,!0);e(P),e(C);var j=v(C,2),F=t(j);e(j),e(p),J(x=>{R(X,a(n).name),R(F,`${x??""}%`)},[()=>a(n).avg_score.toFixed(2)],oe),i(A,p)}),e(d),i(m,d)},S=m=>{var d=Be(),A=t(d);aa(2),e(d),J(()=>xe(A,"src",je.NO_DATA_FOUND_IMAGE)),i(m,d)};W(D,m=>{k()&&k().length>0?m(y):m(S,!1)})}e(s),J(()=>R(_,V())),i(B,s),me()}var ze=o('<div class="flex-1 font-semibold text-gray-700"> </div>'),Me=o('<div class="flex-1"> </div>'),Je=o('<div class="flex w-full py-2 border-b border-gray-100 last:border-0"></div>'),Ue=o('<div class="flex w-full mb-4"></div> <!>',1),We=o('<div><div class="font-semibold text-gray-700"> </div> <div class="text-sm text-gray-500 mt-1"> </div></div> <div class="mt-4 text-right font-bold text-gray-800"> </div>',1),Xe=o('<div class="flex justify-between items-center"><div class="font-semibold text-gray-700"> </div> <div class="font-bold text-gray-800"> </div></div>'),qe=o('<div><div class="flex flex-col"><!></div></div>'),Ke=o('<div class="rounded-[20px] overflow-hidden shadow-md  "><div> </div> <div class="p-6 bg-white"><!></div></div>');function _e(B,g){ge(g,!1);const k=G();let V=L(g,"title",8,"Progress"),s=L(g,"data",24,()=>[]),u=L(g,"columns",8,void 0),_=L(g,"description",8,""),D=L(g,"bgColor",8,"bg-blue-900"),y=L(g,"textColor",8,"text-white");function S(f,h){return h.key?f[h.key]:f[h]}se(()=>fe(s()),()=>{console.log(s(),"data here ")}),se(()=>(fe(u()),fe(s())),()=>{b(k,!u()&&s()&&s().length>0&&s()[0].lesson_name?[{[s()[0].lesson_name]:`${s()[0].avg_completion}%`},{[`${s()[0].completed_by} of ${s()[0].total_players} have completed`]:""}]:s())}),Se(),pe();var m=Ke(),d=t(m),A=t(d,!0);e(d);var n=v(d,2),O=t(n);{var p=f=>{var h=Ue(),P=te(h);N(P,5,u,E,(j,F)=>{var x=ze(),T=t(x,!0);e(x),J(()=>R(T,a(F).label||a(F))),i(j,x)}),e(P);var X=v(P,2);N(X,1,s,E,(j,F)=>{var x=Je();N(x,5,u,E,(T,q)=>{var K=Me(),H=t(K,!0);e(K),J(I=>R(H,I),[()=>S(a(F),a(q))],oe),i(T,K)}),e(x),i(j,x)}),i(f,h)},C=f=>{var h=ue(),P=te(h);N(P,1,()=>a(k),E,(X,j,F)=>{var x=qe();be(x,`py-2 ${(F!==0?"pt-4":"")??""}`);var T=t(x),q=t(T);{var K=I=>{var z=We(),M=te(z),Q=t(M),ee=t(Q,!0);e(Q);var Y=v(Q,2),le=t(Y,!0);e(Y),e(M);var ae=v(M,2),ve=t(ae,!0);e(ae),J((r,l)=>{R(ee,r),R(le,_()),R(ve,l)},[()=>Object.keys(a(j))[0],()=>Object.values(a(j))[0]],oe),i(I,z)},H=I=>{var z=Xe(),M=t(z),Q=t(M,!0);e(M);var ee=v(M,2),Y=t(ee,!0);e(ee),e(z),J((le,ae)=>{R(Q,le),R(Y,ae)},[()=>Object.keys(a(j))[0],()=>Object.values(a(j))[0]],oe),i(I,z)};W(q,I=>{F===0&&_()?I(K):I(H,!1)})}e(T),e(x),i(X,x)}),i(f,h)};W(O,f=>{u()?f(p):f(C,!1)})}e(n),e(m),J(()=>{be(d,`${D()??""} ${y()??""} p-4 font-bold text-center text-xl`),R(A,V())}),i(B,m),me()}var Qe=o('<div class="sm:col-span-1 sm:place-self-auto col-span-1 place-self-center max-w-sm w-full"><!></div>'),Ye=o('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"><!> <!></div> <div class="flex flex-col gap-8 my-8"><!> <!></div>',1),Ze=o('<div class="p-6 text-center"><p class="text-gray-600">No competition data available.</p></div>'),He=o('<div class="flex justify-center w-full px-4 sm:px-6 md:px-8 lg:px-10"><div class="w-full max-w-screen-lg space-y-6"><div class="w-full relative"><div class="flex flex-col xl:flex-row xl:justify-between items-center w-full gap-4"><div class="flex items-center gap-3 xl:absolute xl:left-1/2 xl:transform xl:-translate-x-1/2"><!></div> <div class="w-full xl:w-auto flex justify-center xl:ml-auto"><div class="flex flex-row gap-2 justify-center md:justify-end"><!> <!></div></div></div></div> <!> <!></div></div>');Ce=function(B,g){ge(g,!1);const[k,V]=ra(),s=()=>ta(da,"$gradesStore",k),u=G(),_=G(),D=G();let y=G(null),S=G(null),m=G(null),d=G(null),A=G(!0),n=G([]),O=G([]),p=G(""),C=G("");ua(({from:r})=>{var c;console.log("Previous URL:",(c=r==null?void 0:r.url)==null?void 0:c.pathname),fa("/admin/competitions")});async function f(r,l){var c,$,w,re;console.log("Loading dashboard data for grade:",r,"and subject:",l),b(A,!0);try{const ie=(c=s())==null?void 0:c.grades.findIndex(Z=>Z.grade.toString()===r.toString()),de=($=s())==null?void 0:$.grades.findIndex(Z=>Z.subject===l);if(ie!==-1&&de!==-1){const Z={cms_course_id:(w=s())==null?void 0:w.grades[de].cms_course_id,grade:(re=s())==null?void 0:re.grades[ie].grade},U=await na(Z);b(y,U.competitionSummary),b(S,U.performanceData),b(m,U.gamesReport),b(d,U.lessonsReport)}}finally{b(A,!1)}}function h(r){var c,$;console.log("Selected grade:",r);const l=(c=s())==null?void 0:c.grades.filter(w=>w.grade.toString()===r.toString()).map(w=>w.subject);b(O,ga(($=s())==null?void 0:$.grades.filter(w=>l.includes(w.subject)))),l.length>0&&b(C,l[0])}function P(r){var c,$;const l=($=(c=s())==null?void 0:c.grades.find(w=>w.subject===r))==null?void 0:$.grade;l&&b(p,l)}sa(async()=>{var l;await la();const r=ye((l=s())==null?void 0:l.grades);console.log("this is data to see",r),r.length>0&&(b(p,r[0].value),h(a(p)),a(O).length>0&&(b(C,a(O)[0].value),f(a(p),a(C)))),ia.set({isLogoVisible:!1,isBackButtonVisible:!0,isVoucherButtonVisible:!1,backLabel:"Competitions",isProfileVisible:!0})});const X=[{key:"title",label:"Games"},{key:"avg_score",label:"Avg.Score"},{key:"completion_percentage",label:"Completed By"}];se(()=>(a(y),Oe),()=>{b(u,a(y)?Oe(a(y)):[])}),se(()=>a(S),()=>{var r;b(_,((r=a(S))==null?void 0:r.top)||[])}),se(()=>a(S),()=>{var r;b(D,((r=a(S))==null?void 0:r.struggling)||[])}),se(()=>(s(),ye),()=>{var r,l,c;(r=s())!=null&&r.grades&&((l=s())==null?void 0:l.grades.length)>0&&(console.log("Grades Store Updated:",s().grades),b(n,ye((c=s())==null?void 0:c.grades)))}),Se(),pe();var j=He(),F=t(j),x=t(F),T=t(x),q=t(T),K=t(q);va(K,{customClass:"xl:mr-10",get icon(){return je.LEADERBOARD_ICON},title:"overview",imageClass:"w-9 h-10 sm:w-13 sm:h-11"}),e(q);var H=v(q,2),I=t(H),z=t(I);{var M=r=>{Ae(r,{width:"100%",customClass:"w-20 min-w-[140px] md:min-w-[185px]",get options(){return a(n)},get selectedValue(){return a(p)},onSelect:async l=>{b(p,l),h(l),await f(l,a(C))}})};W(z,r=>{a(n).length>0&&r(M)})}var Q=v(z,2);{var ee=r=>{Ae(r,{width:"100%",customClass:"w-20 min-w-[140px] md:min-w-[185px]",get options(){return a(O)},get selectedValue(){return a(C)},onSelect:async l=>{b(C,l),P(l),await f(a(p),l)}})};W(Q,r=>{a(O).length>0&&r(ee)})}e(I),e(H),e(T),e(x);var Y=v(x,2);Ie(Y,{get isLoading(){return a(A)}});var le=v(Y,2);{var ae=r=>{var l=Ye(),c=te(l);N(c,5,()=>a(u),U=>U.title,(U,ne)=>{var ce=Qe(),ea=t(ce);De(ea,{get number(){return a(ne).number},get title(){return a(ne).title},get icon(){return a(ne).icon}}),e(ce),i(U,ce)}),e(c);var $=v(c,2),w=t($);he(w,{get performers(){return a(_)},title:"Top Performers"});var re=v(w,2);he(re,{get performers(){return a(D)},title:"Struggling Performers"}),e($);var ie=v($,2),de=t(ie);_e(de,{title:"Competition Progress",get data(){return a(d)}});var Z=v(de,2);_e(Z,{title:"Games Progress",get data(){return a(m)},columns:X}),e(ie),i(r,l)},ve=r=>{var l=ue(),c=te(l);{var $=w=>{var re=Ze();i(w,re)};W(c,w=>{a(A)||w($)},!0)}i(r,l)};W(le,r=>{!a(A)&&a(y)?r(ae):r(ve,!1)})}e(F),e(j),i(B,j),me(),V()}});export{pa as __tla,Ce as component,Pe as universal};
