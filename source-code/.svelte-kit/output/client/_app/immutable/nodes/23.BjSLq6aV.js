import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{c as r,r as e,s as n,t as M,f as ae,p as ne,a as ce,g as t,d as de,n as Ze,l as te,F as ge,b,m as R,e as he}from"../chunks/UMRfY9Ko.js";import{t as o,a as i,c as me}from"../chunks/D7kVQxiR.js";import{i as X,s as ea,a as aa}from"../chunks/C8EeH_y7.js";import{e as B,i as T}from"../chunks/DiuJufaP.js";import{i as fe}from"../chunks/DwRdgw7B.js";import{o as ta}from"../chunks/D_1OQ_gr.js";import{I as _e}from"../chunks/CUEp9C6H.js";import{w as ra,g as sa}from"../chunks/CpOe2gu7.js";import{s as $}from"../chunks/Bq4tIOc4.js";import{s as ue}from"../chunks/CBgq6MFg.js";import{p as N}from"../chunks/CSfE_DI5.js";import{s as pe}from"../chunks/CC0ELNUk.js";import{A as la}from"../chunks/C1d6j-5H.js";import{P as ia}from"../chunks/6G2ruq-d.js";import{S as Se}from"../chunks/B-7o-gtO.js";import{b as je,f as da,__tla as oa}from"../chunks/CTeP1B65.js";import{m as be,o as va,__tla as na}from"../chunks/DO_Z3Jwx.js";import{s as ca}from"../chunks/BT9fSTVj.js";import{a as ga}from"../chunks/Bhxzz1gg.js";import{a as ma}from"../chunks/zx05KRmR.js";let Ae,ke,fa=Promise.all([(()=>{try{return oa}catch{}})(),(()=>{try{return na}catch{}})()]).then(async()=>{let xe;xe=!1,ke=Object.freeze(Object.defineProperty({__proto__:null,prerender:xe},Symbol.toStringTag,{value:"Module"}));var Ce=o('<div class="w-full max-w-md bg-white rounded-2xl shadow-sm p-6 flex flex-col items-center"><div class="w-12 h-12 text-gray-600 mb-4"><img class="w-full h-full object-contain"></div> <div class="text-4xl font-semibold text-gray-700"> </div> <div class="text-lg text-gray-500 mt-1"> </div></div>');function De(U,g){let F=N(g,"number",8,0),L=N(g,"title",8,"Total Games"),s=N(g,"icon",8,"");var u=Ce(),S=r(u),P=r(S);e(S);var x=n(S,2),j=r(x,!0);e(x);var m=n(x,2),d=r(m,!0);e(m),e(u),M(()=>{ue(P,"src",s()),ue(P,"alt",L()),$(j,F()??0),$(d,L())}),i(U,u)}var Oe=o('<div class="bg-gray-200 rounded-lg p-6 flex flex-col"><div class="flex items-center mb-4"><div class="w-10 h-10 rounded-full bg-gray-300 mr-3"></div> <div class="h-5 bg-gray-300 rounded w-1/2"></div></div> <div class="h-8 bg-gray-300 rounded w-1/3 mb-2"></div></div>'),Pe=o('<div class="flex items-center justify-between py-3 border-b border-gray-300"><div class="flex items-center"><div class="w-8 h-8 rounded-full bg-gray-300 mr-3"></div> <div class="h-4 bg-gray-300 rounded w-24"></div></div> <div class="h-4 bg-gray-300 rounded w-12"></div></div>'),Ge=o('<div class="bg-gray-200 rounded-lg p-6"><div class="h-6 bg-gray-300 rounded w-1/3 mb-6"></div> <!></div>'),Re=o('<div class="flex flex-col"><div class="flex justify-between mb-2"><div class="h-4 bg-gray-300 rounded w-1/3"></div> <div class="h-4 bg-gray-300 rounded w-16"></div></div> <div class="h-4 bg-gray-300 rounded-full w-full"></div></div>'),$e=o('<div class="bg-gray-200 rounded-lg p-6"><div class="h-6 bg-gray-300 rounded w-1/4 mb-6"></div> <div class="space-y-4"></div></div>'),Fe=o('<div class="animate-pulse"><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"></div> <div class="flex flex-col gap-8 my-8"></div></div>');function Ne(U,g){let F=N(g,"isLoading",8,!0);var L=me(),s=ae(L);{var u=S=>{var P=Fe(),x=r(P);B(x,4,()=>Array(3),T,(d,k)=>{var c=Oe();i(d,c)}),e(x);var j=n(x,2);B(j,4,()=>Array(2),T,(d,k)=>{var c=Ge(),C=n(r(c),2);B(C,0,()=>Array(3),T,(p,D,f,h)=>{var O=Pe();i(p,O)}),e(c),i(d,c)}),e(j);var m=n(j,2);B(m,4,()=>Array(2),T,(d,k)=>{var c=$e(),C=n(r(c),2);B(C,4,()=>Array(3),T,(p,D,f,h)=>{var O=Re();i(p,O)}),e(C),e(c),i(d,c)}),e(m),e(P),i(S,P)};X(s,S=>{F()&&S(u)})}i(U,L)}var Le=o('<div><div class="flex items-center gap-3"><div class="relative"><!></div> <span class="text-gray-500 font-medium truncate max-w-xs"> </span></div> <span class="text-gray-500 font-medium"> </span></div>'),Be=o('<div class="space-y-3 bg-white rounded-b-[20px] px-4 py-3 flex-grow"></div>'),Ie=o('<div class="bg-white rounded-b-[20px] p-6 flex flex-col items-center justify-center flex-grow"><img alt="No data" class="w-40 h-40 mb-4"> <p class="text-gray-500 text-center">No data to display</p></div>'),Ve=o('<div class="bg-blue-900 rounded-[20px] pt-4 w-full shadow-lg flex flex-col"><h2 class="text-white font-bold text-xl mb-4 text-center"> </h2> <!></div>');function ye(U,g){ne(g,!1);let F=N(g,"performers",24,()=>[]),L=N(g,"title",8,"Struggling Performers");fe();var s=Ve(),u=r(s),S=r(u,!0);e(u);var P=n(u,2);{var x=m=>{var d=Be();B(d,5,F,T,(k,c,C)=>{var p=Le();pe(p,`flex items-center justify-between p-2 rounded-[15px] ${(C%2===1?"bg-[#F5F6F7]":"bg-white")??""}`);var D=r(p),f=r(D),h=r(f);la(h,{get t(){return t(c).profile_picture},s:30,u:30,ml:"auto",mr:"auto"}),e(f);var O=n(f,2),q=r(O,!0);e(O),e(D);var A=n(D,2),G=r(A);e(A),e(p),M(y=>{$(q,t(c).name),$(G,`${y??""}%`)},[()=>t(c).avg_score.toFixed(2)],de),i(k,p)}),e(d),i(m,d)},j=m=>{var d=Ie(),k=r(d);Ze(2),e(d),M(()=>ue(k,"src",_e.NO_DATA_FOUND_IMAGE)),i(m,d)};X(P,m=>{F()&&F().length>0?m(x):m(j,!1)})}e(s),M(()=>$(S,L())),i(U,s),ce()}var Te=o('<div class="flex-1 font-semibold text-gray-700"> </div>'),Ue=o('<div class="flex-1"> </div>'),ze=o('<div class="flex w-full py-2 border-b border-gray-100 last:border-0"></div>'),Me=o('<div class="flex w-full mb-4"></div> <!>',1),Ee=o('<div><div class="font-semibold text-gray-700"> </div> <div class="text-sm text-gray-500 mt-1"> </div></div> <div class="mt-4 text-right font-bold text-gray-800"> </div>',1),He=o('<div class="flex justify-between items-center"><div class="font-semibold text-gray-700"> </div> <div class="font-bold text-gray-800"> </div></div>'),Je=o('<div><div class="flex flex-col"><!></div></div>'),Qe=o('<div class="rounded-[20px] overflow-hidden shadow-md  "><div> </div> <div class="p-6 bg-white"><!></div></div>');function we(U,g){ne(g,!1);const F=R();let L=N(g,"title",8,"Progress"),s=N(g,"data",24,()=>[]),u=N(g,"columns",8,void 0),S=N(g,"description",8,""),P=N(g,"bgColor",8,"bg-blue-900"),x=N(g,"textColor",8,"text-white");function j(f,h){return h.key?f[h.key]:f[h]}te(()=>ge(s()),()=>{console.log(s(),"data here ")}),te(()=>(ge(u()),ge(s())),()=>{b(F,!u()&&s()&&s().length>0&&s()[0].lesson_name?[{[s()[0].lesson_name]:`${s()[0].avg_completion}%`},{[`${s()[0].completed_by} of ${s()[0].total_players} have completed`]:""}]:s())}),he(),fe();var m=Qe(),d=r(m),k=r(d,!0);e(d);var c=n(d,2),C=r(c);{var p=f=>{var h=Me(),O=ae(h);B(O,5,u,T,(A,G)=>{var y=Te(),I=r(y,!0);e(y),M(()=>$(I,t(G).label||t(G))),i(A,y)}),e(O);var q=n(O,2);B(q,1,s,T,(A,G)=>{var y=ze();B(y,5,u,T,(I,re)=>{var E=Ue(),Y=r(E,!0);e(E),M(V=>$(Y,V),[()=>j(t(G),t(re))],de),i(I,E)}),e(y),i(A,y)}),i(f,h)},D=f=>{var h=me(),O=ae(h);B(O,1,()=>t(F),T,(q,A,G)=>{var y=Je();pe(y,`py-2 ${(G!==0?"pt-4":"")??""}`);var I=r(y),re=r(I);{var E=V=>{var H=Ee(),z=ae(H),J=r(z),K=r(J,!0);e(J);var Z=n(J,2),se=r(Z,!0);e(Z),e(z);var a=n(z,2),l=r(a,!0);e(a),M((v,_)=>{$(K,v),$(se,S()),$(l,_)},[()=>Object.keys(t(A))[0],()=>Object.values(t(A))[0]],de),i(V,H)},Y=V=>{var H=He(),z=r(H),J=r(z,!0);e(z);var K=n(z,2),Z=r(K,!0);e(K),e(H),M((se,a)=>{$(J,se),$(Z,a)},[()=>Object.keys(t(A))[0],()=>Object.values(t(A))[0]],de),i(V,H)};X(re,V=>{G===0&&S()?V(E):V(Y,!1)})}e(I),e(y),i(q,y)}),i(f,h)};X(C,f=>{u()?f(p):f(D,!1)})}e(c),e(m),M(()=>{pe(d,`${P()??""} ${x()??""} p-4 font-bold text-center text-xl`),$(k,L())}),i(U,m),ce()}var Xe=o('<div class="sm:col-span-1 sm:place-self-auto col-span-1 place-self-center max-w-sm w-full"><!></div>'),qe=o('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8"><!> <!></div> <div class="flex flex-col gap-8 my-8"><!> <!></div>',1),We=o('<div class="p-6 text-center"><p class="text-gray-600">No competition data available.</p></div>'),Ye=o('<div class="w-full space-y-6 px-4 sm:px-6 md:px-8 lg:px-10"><div class="w-full relative mb-8"><div class="flex flex-col md:flex-row md:justify-between md:items-center w-full gap-6"><div class="flex items-center gap-3 justify-center md:justify-start"><!></div> <div class="flex flex-row gap-4 justify-center md:justify-end"><!> <!></div></div></div> <!> <!></div>');Ae=function(U,g){ne(g,!1);const[F,L]=ea(),s=()=>aa(sa,"$gradesStore",F),u=R(),S=R(),P=R();let x=R(null),j=R(null),m=R(null),d=R(null),k=R(!0),c=R([]),C=R([]),p=R(""),D=R("");ga(({from:a})=>{var v;console.log("Previous URL:",(v=a==null?void 0:a.url)==null?void 0:v.pathname),ca("/admin/competitions")});async function f(a,l){var v,_,w,ee;console.log("Loading dashboard data for grade:",a,"and subject:",l),b(k,!0);try{const le=(v=s())==null?void 0:v.grades.findIndex(W=>W.grade.toString()===a.toString()),ie=(_=s())==null?void 0:_.grades.findIndex(W=>W.subject===l);if(le!==-1&&ie!==-1){const W={cms_course_id:(w=s())==null?void 0:w.grades[ie].cms_course_id,grade:(ee=s())==null?void 0:ee.grades[le].grade},Q=await da(W);b(x,Q.competitionSummary),b(j,Q.performanceData),b(m,Q.gamesReport),b(d,Q.lessonsReport)}}finally{b(k,!1)}}function h(a){var v,_;console.log("Selected grade:",a);const l=(v=s())==null?void 0:v.grades.filter(w=>w.grade.toString()===a.toString()).map(w=>w.subject);b(C,va((_=s())==null?void 0:_.grades.filter(w=>l.includes(w.subject)))),l.length>0&&b(D,l[0])}function O(a){var v,_;const l=(_=(v=s())==null?void 0:v.grades.find(w=>w.subject===a))==null?void 0:_.grade;l&&b(p,l)}ta(async()=>{var l;await ra();const a=be((l=s())==null?void 0:l.grades);console.log("this is data to see",a),a.length>0&&(b(p,a[0].value),h(t(p)),t(C).length>0&&(b(D,t(C)[0].value),f(t(p),t(D)))),ma.set({isLogoVisible:!1,isBackButtonVisible:!0,isVoucherButtonVisible:!1,backLabel:"Competitions",isProfileVisible:!0})});const q=[{key:"title",label:"Games"},{key:"avg_score",label:"Avg.Score"},{key:"completion_percentage",label:"Completed By"}];te(()=>(t(x),je),()=>{b(u,t(x)?je(t(x)):[])}),te(()=>t(j),()=>{var a;b(S,((a=t(j))==null?void 0:a.top)||[])}),te(()=>t(j),()=>{var a;b(P,((a=t(j))==null?void 0:a.struggling)||[])}),te(()=>(s(),be),()=>{var a,l,v;(a=s())!=null&&a.grades&&((l=s())==null?void 0:l.grades.length)>0&&(console.log("Grades Store Updated:",s().grades),b(c,be((v=s())==null?void 0:v.grades)))}),he(),fe();var A=Ye(),G=r(A),y=r(G),I=r(y),re=r(I);ia(re,{get icon(){return _e.LEADERBOARD_ICON},title:"players",imageClass:"w-9 h-11 sm:w-13 sm:h-11"}),e(I);var E=n(I,2),Y=r(E);{var V=a=>{Se(a,{customClass:"w-36 min-w-[140px]",get options(){return t(c)},get selectedValue(){return t(p)},onSelect:async l=>{b(p,l),h(l),await f(l,t(D))}})};X(Y,a=>{t(c).length>0&&a(V)})}var H=n(Y,2);{var z=a=>{Se(a,{customClass:"w-36 min-w-[140px]",get options(){return t(C)},get selectedValue(){return t(D)},onSelect:async l=>{b(D,l),O(l),await f(t(p),l)}})};X(H,a=>{t(C).length>0&&a(z)})}e(E),e(y),e(G);var J=n(G,2);Ne(J,{get isLoading(){return t(k)}});var K=n(J,2);{var Z=a=>{var l=qe(),v=ae(l);B(v,5,()=>t(u),Q=>Q.title,(Q,oe)=>{var ve=Xe(),Ke=r(ve);De(Ke,{get number(){return t(oe).number},get title(){return t(oe).title},get icon(){return t(oe).icon}}),e(ve),i(Q,ve)}),e(v);var _=n(v,2),w=r(_);ye(w,{get performers(){return t(S)},title:"Top Performers"});var ee=n(w,2);ye(ee,{get performers(){return t(P)},title:"Struggling Performers"}),e(_);var le=n(_,2),ie=r(le);we(ie,{title:"Competition Progress",get data(){return t(d)}});var W=n(ie,2);we(W,{title:"Games Progress",get data(){return t(m)},columns:q}),e(le),i(a,l)},se=a=>{var l=me(),v=ae(l);{var _=w=>{var ee=We();i(w,ee)};X(v,w=>{t(k)||w(_)},!0)}i(a,l)};X(K,a=>{!t(k)&&t(x)?a(Z):a(se,!1)})}e(A),i(U,A),ce(),L()}});export{fa as __tla,Ae as component,ke as universal};
