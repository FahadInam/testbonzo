import"../chunks/BDr9Qe-U.js";import"../chunks/69_IOA4Y.js";import{p as ee,b as m,g as s,l as te,e as se,f as M,a as oe,m as c,t as P,d as u,ad as ie,s as L,c as I,r as N}from"../chunks/UMRfY9Ko.js";import{h as ae,s as re}from"../chunks/Bq4tIOc4.js";import{a as V,i as y,s as me}from"../chunks/C8EeH_y7.js";import{t as R,a as S,c as ne}from"../chunks/D7kVQxiR.js";import{i as le}from"../chunks/DwRdgw7B.js";import{o as ce,a as ue}from"../chunks/D_1OQ_gr.js";import{u as T}from"../chunks/rUUE80t4.js";import{r as _e,e as pe}from"../chunks/CpOe2gu7.js";import{__tla as de}from"../chunks/xsk9tW-i.js";import"../chunks/CVxajco_.js";import{m as fe,r as ge,S as be,V as he,C as ve,__tla as Ve}from"../chunks/BVzu-Z1G.js";import{B as ye}from"../chunks/CK4bPedK.js";import{t as Se}from"../chunks/KgIHh09F.js";import{s as we}from"../chunks/CN0MmCAJ.js";import{g as j}from"../chunks/Bhxzz1gg.js";import{s as Be,c as $e,a as ke}from"../chunks/BT9fSTVj.js";import{a as z,c as D}from"../chunks/zx05KRmR.js";import{b as xe,c as Ce,__tla as Me}from"../chunks/DO_Z3Jwx.js";import{s as Pe}from"../chunks/DAxMji9q.js";import{m as Le}from"../chunks/Buhwy7Lv.js";let G,Ie=Promise.all([(()=>{try{return de}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return Me}catch{}})()]).then(async()=>{var H=R('<p class="text-center text-white"> </p>'),K=R("<!> <div><!> <!></div>",1);G=function(O,Q){var C;ee(Q,!1);const[_,U]=me(),W=()=>V(Pe,"$systemSettingsStore",_),p=()=>V(T,"$userStore",_),n=()=>V(Se,"$t",_);let d=c([]),f=c([]),g=c(!0),l=c(!1);const X=(C=W())==null?void 0:C.is_voucher_allowed;let w=p().is_guest_mode;we.set({visible:!1});async function b(){const e=await xe();m(f,e.data.competitions);let o=s(f).map(r=>_e(r,{banner_image:"image",competition_id:"id",name:"title"}));m(d,o),m(g,!1),ge()}ce(async()=>{D.set({url:null,name:null,current_grade:null,competition_id:null,is_lesson_page_hide:null,is_games_page:null,is_premium:null}),b()}),Be("/"),$e(),ke("/competitions");const Y=z.subscribe(e=>{m(l,e.isVoucherModalVisible)}),Z=T.subscribe(e=>{e.is_guest_mode!==w&&(w=e.is_guest_mode,s(g)||b())});fe(["/"]),ue(()=>{Y(),Z()}),te(()=>p(),()=>{z.set({visible:!0,backLabel:"",isLogoVisible:!0,isCoinVisible:!1,isBackButtonVisible:!!p().is_guest_mode,isVoucherButtonVisible:X,isVoucherModalVisible:!1,isNotificationVisible:!1,isShowPaymentBanner:!1,isShowRules:!1,isProfileVisible:!0})}),se(),le();var B=K();ae(e=>{P(o=>ie.title=o,[()=>n()("competitions")],u)});var $=M(B);ye($,{});var k=L($,2),x=I(k);{var q=e=>{be(e,{})},A=e=>{var o=ne(),r=M(o);{var h=i=>{ve(i,{get competitions(){return s(d)},onItemClick:a=>{console.log("first competition id",a);const t=pe(a,s(f),"competition_id");D.set(t),Le.update(v=>({...v,url:t.url,id:t.competition_id,current_grade:t.current_grade})),!t.enrolled&&t.rules?j("competitions/"+t.url+"/rules"):j("competitions/"+t.url+"/home")}})},J=i=>{var a=H(),t=I(a,!0);N(a),P(v=>re(t,v),[()=>n()("no_competitions")],u),S(i,a)};y(r,i=>{s(d).length>0?i(h):i(J,!1)},!0)}S(e,o)};y(x,e=>{s(g)?e(q):e(A,!1)})}var E=L(x,2);{var F=e=>{const o=u(()=>n()("add_voucher_code")),r=u(()=>n()("voucher_instruction"));he(e,{onSuccess:b,onSubmit:Ce,get title(){return s(o)},get instructionText(){return s(r)},get showModal(){return s(l)},set showModal(h){m(l,h)},$$legacy:!0})};y(E,e=>{s(l)&&e(F)})}N(k),S(O,B),oe(),U()}});export{Ie as __tla,G as component};
